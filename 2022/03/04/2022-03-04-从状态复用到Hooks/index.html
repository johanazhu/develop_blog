<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="azhubabyçš„æŠ€æœ¯åšå®¢"><title>ä¸€æ–‡æ¦‚è¿°ï¼šä»çŠ¶æ€å¤ç”¨åˆ°Hooks | Azhubaby Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.1"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','G-QLGQ1V2DVG','auto');ga('send','pageview');
</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = 'https://hm.baidu.com/hm.js?' + 'b735438e944e58cd4b0914986a8f821c';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><div class="darkmode-toggle">ğŸŒ“</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 5.4.2"></head><body><header class="clearfix" id="header"><div class="container"><div class="col-group"><div class="site-name"><h1 class="hidden">ä¸€æ–‡æ¦‚è¿°ï¼šä»çŠ¶æ€å¤ç”¨åˆ°Hooks</h1><a id="logo" href="/.">Azhubaby Blog</a><p class="description">å…³äºç¼–ç¨‹ã€ä¸ªäººæˆé•¿ä»¥åŠæ€è€ƒ</p></div><div> <nav class="clearfix" id="nav-menu"><a class="current" href="/."><i class="fa undefined"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa undefined"> å½’æ¡£</i></a><a href="/tags/"><i class="fa undefined"> æ ‡ç­¾</i></a><a href="/about/"><i class="fa undefined"> å…³äº</i></a><a class="search-icon" href="javascript:void(0)"><i class="fa fa-search"></i></a></nav></div></div></div></header><div id="body"><div class="container"><div class="col-group"><div class="col-8" id="main"><div class="res-cons"><div class="post"><h1 class="post-title">ä¸€æ–‡æ¦‚è¿°ï¼šä»çŠ¶æ€å¤ç”¨åˆ°Hooks</h1><div class="post-meta">2022-03-04<span> | </span><span class="category"><a href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">å‰ç«¯å¼€å‘</a><!--busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js--><a href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/React/">React</a><!--busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js--></span><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> é˜…è¯»</span></span><span> | </span><span>ä½œè€…ï¼š</span><span class="author">é—¨ç½—å¸</span></div><div class="post-content"><blockquote>
<p>å­¦ä¹ ä¸€é¡¹çŸ¥è¯†ï¼Œå¿…é¡»é—®è‡ªå·±ä¸‰ä¸ªé‡è¦é—®é¢˜ï¼š1. å®ƒçš„æœ¬è´¨æ˜¯ä»€ä¹ˆã€‚2. å®ƒçš„ç¬¬ä¸€åŸåˆ™æ˜¯ä»€ä¹ˆã€‚3. å®ƒçš„çŸ¥è¯†ç»“æ„æ˜¯æ€æ ·çš„</p>
</blockquote>
<h2 id="æµ‹è¯•ä¸€ä¸‹-Hooks-çš„ç†Ÿç»ƒç¨‹åº¦"><a href="#æµ‹è¯•ä¸€ä¸‹-Hooks-çš„ç†Ÿç»ƒç¨‹åº¦" class="headerlink" title="æµ‹è¯•ä¸€ä¸‹ Hooks çš„ç†Ÿç»ƒç¨‹åº¦"></a>æµ‹è¯•ä¸€ä¸‹ Hooks çš„ç†Ÿç»ƒç¨‹åº¦</h2><p>ä¸ºä»€ä¹ˆä¸èƒ½åœ¨ for å¾ªç¯ã€if è¯­å¥é‡Œä½¿ç”¨ Hooks</p>
<p>React.memoã€React.useCallbackã€React.usememo çš„ä½œç”¨ï¼Œä»¥åŠå¯¹æ¯”</p>
<p>useState ä¸­çš„å€¼æ˜¯ä¸ªå¯¹è±¡ï¼Œæ”¹å˜å¯¹è±¡ä¸­çš„å€¼ï¼Œç»„ä»¶ä¼šæ¸²æŸ“å—ï¼Ÿå¦‚æœç”¨ React.memo() åŒ…è£¹ä½å‘¢</p>
<p>Hooks çš„ï¼ˆå®ç°ï¼‰åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>Hooks çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>React Hooksï¼Œå®ƒå¸¦æ¥äº†å“ªäº›ä¾¿åˆ©ï¼Ÿ</p>
<p>React Hooks å½“ä¸­çš„ useEffect æ˜¯å¦‚ä½•åŒºåˆ†ç”Ÿå‘½å‘¨æœŸé’©å­çš„</p>
<p>useEffect(fn, []) å’Œ componentDidMount æœ‰ä»€ä¹ˆå·®å¼‚</p>
<hr>
<p>å›ç­”å¾—å¦‚ä½•ï¼Ÿåœ¨äº†è§£ä¸€ä¸ªæ¦‚å¿µå‰ï¼Œç–‘æƒ‘è¶Šå¤šï¼Œç†è§£å°±è¶Šæ·±</p>
<h2 id="æ˜¯ä»€ä¹ˆ"><a href="#æ˜¯ä»€ä¹ˆ" class="headerlink" title="æ˜¯ä»€ä¹ˆ"></a>æ˜¯ä»€ä¹ˆ</h2><p>React Hooks æ˜¯  React 16.8 æ¨å‡ºçš„æ–°ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§</p>
<h2 id="ä¸ºä»€ä¹ˆä¼šæœ‰-Hooks"><a href="#ä¸ºä»€ä¹ˆä¼šæœ‰-Hooks" class="headerlink" title="ä¸ºä»€ä¹ˆä¼šæœ‰ Hooks"></a>ä¸ºä»€ä¹ˆä¼šæœ‰ Hooks</h2><p>æˆ‘ä»¬ä¸€å®šè¦æœ‰ä¸ªæ¦‚å¿µï¼Œå³ React çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿå®ƒçš„ç‰¹å¾æ˜¯ UI=f(data)ã€ä¸€åˆ‡çš†ç»„ä»¶ã€å£°æ˜å¼ç¼–ç¨‹ã€‚é‚£ä¹ˆï¼Œæ—¢ç„¶æ˜¯ UI=f(data)ï¼Œdataï¼ˆæ•°æ®ï¼‰é€šè¿‡ function æ¥é©±åŠ¨ UI è§†å›¾å˜åŒ–ã€‚åœ¨ä¸šåŠ¡ä¸­ï¼Œä½ ä¸èƒ½ç®€å•åªå±•ç¤ºï¼Œä¹Ÿéœ€äº¤äº’ï¼Œäº¤äº’å°±ä¼šæ›´æ–°çŠ¶æ€ï¼ŒReact æ˜¯é€šè¿‡ setState æ¥æ”¹å˜çŠ¶æ€ã€‚ä½†è¿™ä»…é™äºç±»ç»„ä»¶ï¼Œæ‰€ä»¥åœ¨Hookså‡ºç°ä¹‹å‰ï¼Œå‡½æ•°å¼ç»„ä»¶ç”¨æ¥æ¸²æŸ“ç»„ä»¶ï¼ˆä¹Ÿç§°å®ƒä¸ºæœ¨å¶ç»„ä»¶ï¼‰ï¼Œç±»ç»„ä»¶ç”¨æ¥æ§åˆ¶çŠ¶æ€</p>
<p>è€Œåï¼Œä¸ºäº†è®©çŠ¶æ€èƒ½æ›´å¥½çš„å¤ç”¨ï¼Œæå‡ºäº†<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-without-es6.html#mixins">Mixins</a> ã€<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/render-props.html">render props</a> å’Œ <a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/higher-order-components.html">é«˜é˜¶ç»„ä»¶</a>ã€‚è¯šç„¶ï¼Œrender propsã€é«˜é˜¶ç»„ä»¶èƒ½è™½ç„¶èƒ½è§£å†³ï¼Œä½†æ˜¯ä¼šå¸¦æ¥å‰¯ä½œç”¨â€”â€”ç»„ä»¶ä¼šå½¢æˆâ€œåµŒå¥—åœ°ç‹±â€</p>
<p>ä»¥åŠç±»ç»„ä»¶æœ¬èº«çš„ç”Ÿå‘½å‘¨æœŸä¼šä½¿å¾—å¤æ‚çš„ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£ã€class è¯­æ³•çš„å­¦ä¹ æˆæœ¬ç­‰ç­‰ï¼Œæ„æˆäº†React å›¢é˜Ÿæå‡º hooksâ€”â€”è®©å‡½æ•°å¼ç»„ä»¶æ‹¥æœ‰çŠ¶æ€ç®¡ç†</p>
<p><a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/hooks-intro.html#motivation">å®˜ç½‘</a>ä¹Ÿé˜è¿°è¿‡è®¾è®¡Hooksçš„ä¸‰å¤§åŠ¨æœºï¼š</p>
<blockquote>
<ol>
<li>åœ¨ç»„ä»¶ä¹‹é—´å¤ç”¨çŠ¶æ€é€»è¾‘å¾ˆéš¾</li>
<li>å¤æ‚ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£</li>
<li>éš¾ä»¥ç†è§£çš„ class</li>
</ol>
</blockquote>
<h2 id="çŠ¶æ€å¤ç”¨çš„å®éªŒ"><a href="#çŠ¶æ€å¤ç”¨çš„å®éªŒ" class="headerlink" title="çŠ¶æ€å¤ç”¨çš„å®éªŒ"></a>çŠ¶æ€å¤ç”¨çš„å®éªŒ</h2><h3 id="Mixinsæ—¶ä»£"><a href="#Mixinsæ—¶ä»£" class="headerlink" title="Mixinsæ—¶ä»£"></a>Mixinsæ—¶ä»£</h3><p>åœ¨ç¬”è€…å°šæœªä½¿ç”¨ React ä¹‹å‰å°±å­˜åœ¨ï¼Œç°å·²è¢«æ·˜æ±°</p>
<blockquote>
<p>Mixinsï¼ˆæ··å…¥ï¼‰æ˜¯ä¸€ç§é€šè¿‡æ‰©å±•æ”¶é›†åŠŸèƒ½çš„æ–¹å¼ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯å°†ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ‹·è´åˆ°å¦ä¸€ä¸ªå¯¹è±¡ä¸Šï¼Œä¸è¿‡ä½ å¯ä»¥æ‹·è´ä»»æ„å¤šä¸ªå¯¹è±¡çš„ä»»æ„ä¸ªæ–¹æ³•åˆ°ä¸€ä¸ªæ–°å¯¹è±¡ä¸Šå»ï¼Œè¿™æ˜¯ç»§æ‰¿æ‰€ä¸èƒ½å®ç°çš„ã€‚å®ƒçš„å‡ºç°ä¸»è¦å°±æ˜¯ä¸ºäº†è§£å†³ä»£ç å¤ç”¨é—®é¢˜</p>
</blockquote>
<p>è¿™é‡Œä¸å¯¹å…¶åšåˆ†æï¼ŒReactå®˜æ–¹æ–‡æ¡£åœ¨ <a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/blog/2016/07/13/mixins-considered-harmful.html">Mixins Considered Harmful</a> ä¸€æ–‡ä¸­æåˆ°äº† Mixins å¸¦æ¥çš„å±å®³ï¼š</p>
<ul>
<li>Mixins å¯èƒ½ä¼šç›¸äº’ä¾èµ–ï¼Œç›¸äº’è€¦åˆï¼Œä¸åˆ©äºä»£ç ç»´æŠ¤</li>
<li>ä¸åŒçš„ Mixins ä¸­çš„æ–¹æ³•å¯èƒ½ä¼šç›¸äº’å†²çª</li>
<li>Mixins éå¸¸å¤šæ—¶ï¼Œç»„ä»¶æ˜¯å¯ä»¥æ„ŸçŸ¥åˆ°çš„ï¼Œç”šè‡³è¿˜è¦ä¸ºå…¶åšç›¸å…³å¤„ç†ï¼Œè¿™æ ·ä¼šç»™ä»£ç é€ æˆæ»šé›ªçƒçš„å¤æ‚æ€§</li>
</ul>
<h3 id="Render-Props"><a href="#Render-Props" class="headerlink" title="Render Props"></a>Render Props</h3><p>æŒ‡ä¸€ç§åœ¨ React ç»„ä»¶ä¹‹é—´ä½¿ç”¨ä¸€ä¸ªå€¼ä¸ºå‡½æ•°çš„ prop å…±äº«ä»£ç çš„ç®€å•æŠ€æœ¯</p>
<p>å…·æœ‰ render prop çš„ç»„ä»¶æ¥å—ä¸€ä¸ªè¿”å› React å…ƒç´ çš„å‡½æ•°ï¼Œå¹¶åœ¨ç»„ä»¶å†…éƒ¨é€šè¿‡è°ƒç”¨æ­¤å‡½æ•°æ¥å®ç°è‡ªå·±çš„æ¸²æŸ“é€»è¾‘</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">DataProvider</span> render=&#123;<span class="function"><span class="params">data</span>=&gt;</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;data.target&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">)&#125;&gt;</span><br></pre></td></tr></table></figure>

<p>å…·ä½“å¯åœ¨<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/render-props.html">å®˜ç½‘</a>äº†è§£</p>
<h3 id="HOCï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰"><a href="#HOCï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰" class="headerlink" title="HOCï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰"></a>HOCï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰</h3><p>HOCçš„åŸç†å…¶å®å¾ˆç®€å•ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”å®ƒæ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼ŒæŠŠå¤ç”¨çš„åœ°æ–¹æ”¾åœ¨é«˜é˜¶ç»„ä»¶ä¸­ï¼Œä½ åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œåªéœ€è¦åšä¸åŒç”¨å¤„</p>
<p>æ‰“ä¸ªæ¯”æ–¹ï¼šå°±å¥½åƒç»™ä½ ä¸€ç“¶æ°´ï¼Œä½ åœ¨æ¸´çš„æ—¶å€™å°±ä¼šå–å®ƒï¼›ä½ åœ¨è€å¸…çš„æ—¶å€™æ‹¿å®ƒæ‘†POSEï¼›ä½ åœ¨åˆ«äººéœ€è¦çš„æ—¶å€™ç»™ä»–å–å¸®åŠ©äººâ€¦</p>
<p>Writing is cheap. Show me code</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function Wrapper(WrappedComponent) &#123;</span><br><span class="line">    return class extends React.Component &#123;</span><br><span class="line">        componentDidMount() &#123;</span><br><span class="line">            console.log(&#x27;æˆ‘æ˜¯ä¸€ç“¶æ°´&#x27;)</span><br><span class="line">        &#125;</span><br><span class="line">        render() &#123;</span><br><span class="line">            return (</span><br><span class="line">                &lt;div&gt;</span><br><span class="line">                    &lt;div className=&quot;title&quot;&gt;&#123;this.props.title&#125;&lt;/div&gt;	</span><br><span class="line">                    &lt;WrappedComponent &#123;...this.props&#125; /&gt;</span><br><span class="line">                &lt;/div&gt;	</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">import &quot;./styles.css&quot;;</span><br><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import Wrapper from &quot;./Wrapper&quot;;</span><br><span class="line"></span><br><span class="line">class A extends React.Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;div&gt;å–å®ƒ&lt;/div&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class B extends React.Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;div&gt;è€å¸…æ‘†POSE&lt;/div&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class C extends React.Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return &lt;div&gt;å¸®åŠ©åˆ«äºº&lt;/div&gt;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const AA = Wrapper(A);</span><br><span class="line">const BB = Wrapper(B);</span><br><span class="line">const CC = Wrapper(C);</span><br><span class="line"></span><br><span class="line">export default function App() &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">      &lt;h1&gt;Hello CodeSandbox&lt;/h1&gt;</span><br><span class="line">      &lt;h2&gt;Start editing to see some magic happen!&lt;/h2&gt;</span><br><span class="line">      &lt;AA title=&quot;æˆ‘æ˜¯æ™®é€šäºº&quot; /&gt;</span><br><span class="line">      &lt;BB /&gt;</span><br><span class="line">      &lt;CC /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±å¾ˆæ˜æ˜¾çš„çœ‹å‡º HOC çš„å¥½å¤„ï¼Œâ€ä¸€ç“¶æ°´â€œæ˜¯å…±åŒä»£ç ï¼ŒAã€Bã€Cå¤„ç†ä¸šåŠ¡ä»£ç ï¼Œç„¶åå°†Aã€Bã€Cä¼ å…¥HOCï¼ˆä¸€ç“¶æ°´ï¼‰ä¸­ï¼Œè¿”å›äº†ä¸€ä¸ªæ–°çš„ç»„ä»¶ AAã€BBã€CCã€‚ç›¸åŒçš„ä»£ç å¾—åˆ°äº†å…¬ç”¨</p>
<p><img src="https://i.loli.net/2021/09/17/q7vQpZwIngNc3C2.png" alt="HOC-demo"></p>
<p>å„ä½å¯ä»¥å‰å¾€è¿™é‡ŒæŸ¥çœ‹ <a target="_blank" rel="noopener" href="https://codesandbox.io/s/hoc-demo-d9p9j?file=/src/App.js:0-629">demo</a></p>
<p>HOC çš„ç”¨å¤„ä¸å•å•æ˜¯ä»£ç å¤ç”¨ï¼Œè¿˜å¯ä»¥åšæƒé™æ§åˆ¶ã€æ‰“å°æ—¥å¿—ç­‰ã€‚ä½†å®ƒçš„ç¼ºé™·ä¹Ÿæ²¡æ˜æ˜¾ï¼Œå½“å¤§é‡ä½¿ç”¨ HOC åï¼Œä¼šäº§ç”Ÿå¤§é‡çš„åµŒå¥—ï¼Œä½¿å¾—åµŒå¥—å˜å¾—å›°éš¾ï¼›å¹¶ä¸” HOC ä¼šåŠ«æŒ propsï¼Œåœ¨ä¸éµå®ˆçº¦å®šçš„æƒ…å†µä¸‹å¯èƒ½ä¼šé€ æˆå†²çª</p>
<p>æ€»ç»“ä¸‹ HOCï¼š</p>
<ul>
<li>ç”¨æ³•ï¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸€ä¸ªç»„ä»¶ä½œä¸ºè¾“å…¥ï¼Œé™¤äº†ç»„ä»¶è¿˜å¯ä»¥ä¼ é€’å…¶ä»–çš„å‚æ•°ï¼ŒåŸºäºè¯¥ç»„ä»¶è¿”å›ä¸€ä¸ªä¸åŒçš„ç»„ä»¶</li>
<li>ä¼˜ç‚¹ï¼šä»£ç å¤ç”¨ï¼Œé€»è¾‘å¤ç”¨</li>
<li>ç¼ºç‚¹ï¼šå› ä¸ºåµŒå¥—ä½¿å¾—è°ƒè¯•éš¾åº¦å˜é«˜ï¼›ä¼šåŠ«æŒpropsï¼Œæˆ–è®¸é€ æˆå†²çª</li>
</ul>
<h2 id="Hooks-çš„å‡ºä¸–"><a href="#Hooks-çš„å‡ºä¸–" class="headerlink" title="Hooks çš„å‡ºä¸–"></a>Hooks çš„å‡ºä¸–</h2><p>å‰æœ‰çŠ¶æ€å¤ç”¨çš„ä¸ç»™åŠ›ï¼ˆ Mixins è¢«æ·˜æ±°ï¼Œrender propsã€HOC çš„å‰¯ä½œç”¨åˆå¤§ï¼‰ï¼Œåæœ‰ç±»ç»„ä»¶çš„å¤æ‚ç»„ä»¶éš¾ä»¥ç†è§£ã€ç»´æŠ¤ï¼ˆè¿‡å¤šçš„ç”Ÿå‘½å‘¨æœŸï¼‰ï¼Œclass å±æ€§é€ æˆçš„ this æŒ‡å‘åˆéº»çƒ¦ã€‚äºæ˜¯ä¹ï¼ŒHooks å¤§å–Šä¸€å£°ï¼šæˆ‘æ¥ä¹Ÿ</p>
<p>å®ƒèµ·ç æœ‰ä¸‰ä¸ªå¥½å¤„</p>
<ul>
<li>é€»è¾‘å¤ç”¨<ul>
<li>ç§’æ€render propsã€hoc</li>
</ul>
</li>
<li>ä¸šåŠ¡ä»£ç æ›´èšåˆ<ul>
<li>ç§’æ€ç±»ç»„ä»¶</li>
</ul>
</li>
<li>å†™æ³•ç®€æ´<ul>
<li>ç§’æ€ç±»ç»„ä»¶</li>
</ul>
</li>
</ul>
<h2 id="useState"><a href="#useState" class="headerlink" title="useState"></a>useState</h2><p>ä½œç”¨ï¼šè®©å‡½æ•°ç»„ä»¶å…·æœ‰ç»´æŒçŠ¶æ€çš„èƒ½åŠ›ï¼Œæ›¿ä»£ç±»ç»„ä»¶çš„constructoråˆå§‹åŒ–çŠ¶æ€</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">Counter</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">    	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count+1)&#125;&gt;&#123;count&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç‰¹ç‚¹ï¼šé€»è¾‘å¤ç”¨</p>
<p>åœ¨ä½¿ç”¨ useState æ—¶ï¼Œä¼šå‡ºç°ä¸¤ä¸ªè¡ç”Ÿé—®é¢˜ï¼š</p>
<h3 id="ä¸€ï¼šCapture-Value-ç‰¹æ€§"><a href="#ä¸€ï¼šCapture-Value-ç‰¹æ€§" class="headerlink" title="ä¸€ï¼šCapture Value ç‰¹æ€§"></a>ä¸€ï¼šCapture Value ç‰¹æ€§</h3><p>åœ¨<a href="https://blog.azhubaby.com/2022/03/01/2022-03-01-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6%E4%B8%8E%E7%B1%BB%E7%BB%84%E4%BB%B6%E6%9C%89%E4%BD%95%E4%B8%8D%E5%90%8C/">å‡½æ•°å¼ç»„ä»¶ä¸ç±»ç»„ä»¶æœ‰ä½•ä¸åŒ</a>ä¸­æ›¾ä»‹ç»è¿‡ï¼Œ<strong>å‡½æ•°å¼ç»„ä»¶èƒ½æ•è·æ¸²æŸ“æ—¶æ‰€ç”¨çš„å€¼</strong>ã€‚å¹¶ä¸¾ä¾‹ç»„ä»¶ä¸­ç‚¹ä¸‰ä¸‹åŠ ï¼Œ setTimeout 3ç§’åå¼¹å‡ºæ•°å­—ï¼Œåœ¨ç‚¹ä¸¤æ¬¡åŠ ï¼Œ3ç§’åå±•ç¤º3ï¼Œè€Œä¸æ˜¯5ã€‚è€Œç±»ç»„ä»¶å´èƒ½è·å¾—æœ€æ–°çš„æ•°æ®ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ</p>
<p>å› ä¸ºå‡½æ•°å¼ç»„ä»¶æœ‰ Capture Value çš„ç‰¹æ€§ã€‚è€Œä»æºç çš„è§’åº¦çœ‹ï¼Œæ¯æ¬¡è°ƒç”¨ setXX ä¼šå¼•å‘ re-render ä»è€Œé‡æ¸²æŸ“ç»„ä»¶</p>
<p>å¦‚æœæƒ³è·å¾—æœ€æ–°å€¼ï¼Œå¯ä»¥é€šè¿‡ useRef æ¥å°†å€¼ä¿å­˜åœ¨å†…å­˜ä¸­</p>
<h3 id="äºŒï¼šuseState-ä¸­çš„å€¼æ˜¯ä¸ªå¯¹è±¡ï¼Œæ”¹å˜å¯¹è±¡ä¸­çš„å€¼ï¼Œç»„ä»¶ä¼šæ¸²æŸ“å—ï¼Ÿæ€ä¹ˆä¼˜åŒ–ï¼Ÿ"><a href="#äºŒï¼šuseState-ä¸­çš„å€¼æ˜¯ä¸ªå¯¹è±¡ï¼Œæ”¹å˜å¯¹è±¡ä¸­çš„å€¼ï¼Œç»„ä»¶ä¼šæ¸²æŸ“å—ï¼Ÿæ€ä¹ˆä¼˜åŒ–ï¼Ÿ" class="headerlink" title="äºŒï¼šuseState ä¸­çš„å€¼æ˜¯ä¸ªå¯¹è±¡ï¼Œæ”¹å˜å¯¹è±¡ä¸­çš„å€¼ï¼Œç»„ä»¶ä¼šæ¸²æŸ“å—ï¼Ÿæ€ä¹ˆä¼˜åŒ–ï¼Ÿ"></a>äºŒï¼šuseState ä¸­çš„å€¼æ˜¯ä¸ªå¯¹è±¡ï¼Œæ”¹å˜å¯¹è±¡ä¸­çš„å€¼ï¼Œç»„ä»¶ä¼šæ¸²æŸ“å—ï¼Ÿæ€ä¹ˆä¼˜åŒ–ï¼Ÿ</h3><p>ä¸€èˆ¬æˆ‘ä»¬ç”¨ useState å°½é‡éµå®ˆå•ä¸€å€¼ï¼Œä½†éš¾å…ä¼šé‡åˆ°ä¸€äº›ç‰¹æ®Šæƒ…å†µï¼Œå¦‚æœå€¼æ˜¯ä¸ªå¯¹è±¡ï¼Œæ”¹å˜å¯¹è±¡ä¸­çš„å…¶ä¸­ä¸€ä¸ªå±æ€§ï¼Œå…¶ä»–å±æ€§ä¸å˜ï¼Œé‚£ä¹ˆå¼•ç”¨å…¶ä»–å±æ€§çš„ç»„ä»¶æ˜¯å¦ä¼šæ¸²æŸ“å‘¢ï¼Ÿ</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">DemoSon</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;render&quot;</span>, props);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;props.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Demo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = <span class="title function_">useState</span>(&#123; <span class="attr">foo</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;johan&quot;</span>, <span class="attr">bar</span>: &#123; <span class="attr">baz</span>: <span class="number">1</span> &#125; &#125; &#125;);</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setData</span>(&#123;</span><br><span class="line">      ...data,</span><br><span class="line">      <span class="attr">foo</span>: &#123;</span><br><span class="line">        ...data.<span class="property">foo</span>,</span><br><span class="line">        <span class="attr">bar</span>: &#123;</span><br><span class="line">          <span class="attr">baz</span>: <span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;data.foo.bar.baz&#125;</span></span><br><span class="line"><span class="language-xml">	  <span class="tag">&lt;<span class="name">DemoSon</span> <span class="attr">name</span>=<span class="string">&#123;data.foo.name&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ç‚¹å‡» divï¼Œä¿®æ”¹ baz çš„å€¼ï¼ŒDemoSon æ˜¯å¦ä¼šæ¸²æŸ“å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¼šçš„ï¼Œä¸ºä»€ä¹ˆä¼šæ¸²æŸ“ï¼Ÿå› ä¸ºä½ çš„å¼•ç”¨å€¼å‘ç”Ÿäº†å˜åŒ–ï¼Œç”Ÿæˆäº†æ–°çš„è™šæ‹ŸDOMï¼Œæ¸²æŸ“åˆ°è§†å›¾ä¸Šæ—¶ï¼Œå­ç»„ä»¶å°±ä¼šæ¸²æŸ“ã€‚å¦‚ä½•ä¼˜åŒ–ï¼Œè®©æ•°æ®ä¸å˜çš„ç»„ä»¶ä¸é‡å¤æ¸²æŸ“ï¼Ÿæˆ‘è§‰å¾—æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€æ‹†åˆ† dataï¼Œæ‹†åˆ†æˆ foo å¯¹è±¡å’Œnameï¼Œå› ä¸º setData å¹¶ä¸æ”¹å˜ nameï¼Œæ‰€ä»¥DemoSon ä¸ä¼šæ¸²æŸ“ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯é€šè¿‡ memo åŒ…è£¹ä½ DemoSonï¼Œå› ä¸º memo èƒ½é¿å…é‡æ–°æ¸²æŸ“</p>
<p>å¯æŸ¥çœ‹çº¿ä¸Š <a target="_blank" rel="noopener" href="https://codesandbox.io/s/usestateyin-ru-dui-xiang-98sxiw?file=/src/Demo.js">demo</a></p>
<h2 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h2><p>ä½œç”¨ï¼šå¤„ç†å‰¯ä½œç”¨ï¼Œæ›¿ä»£ç±»ç»„ä»¶çš„componentDidMountã€componentDidUpdateã€componentWillUnmount</p>
<p>ä½¿ç”¨æ–¹å¼ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ²¡æœ‰ç¬¬äºŒä¸ªå‚æ•°</span></span><br><span class="line"><span class="comment">// mount é˜¶æ®µå’Œ update é˜¶æ®µéƒ½æ‰§è¡Œ</span></span><br><span class="line"><span class="title function_">useEffect</span>(fn)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬äºŒä¸ªå‚æ•°ä¸ºç©ºæ•°ç»„</span></span><br><span class="line"><span class="comment">// å½“ mount é˜¶æ®µä¼šæ‰§è¡Œ</span></span><br><span class="line"><span class="title function_">useEffect</span>(fn,[])</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç¬¬äºŒä¸ªå‚æ•°ä¸ºä¾èµ–é¡¹</span></span><br><span class="line"><span class="comment">// å½“ä¾èµ–é¡¹ï¼ˆdepsï¼‰æ•°æ®æ›´æ–°æ—¶ä¼šæ‰§è¡Œ</span></span><br><span class="line"><span class="title function_">useEffect</span>(fn, [deps])</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸…é™¤å‰¯ä½œç”¨ </span></span><br><span class="line"><span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> subscription = props.<span class="property">source</span>.<span class="title function_">subscribe</span>();</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ¸…é™¤è®¢é˜…</span></span><br><span class="line">    subscription.<span class="title function_">unsubscribe</span>();</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>PSï¼šä»¥ä¸Šæ³¨é‡Šä¸­çš„ mount é˜¶æ®µï¼Œå³ç»„ä»¶åŠ è½½æ—¶ï¼›update æŒ‡æ•°æ®ï¼ˆåŒ…æ‹¬propsã€stateï¼‰å˜åŒ–æ—¶</p>
</blockquote>
<p>åœ¨ä½¿ç”¨ useEffect æ—¶ï¼Œä¼šé¢ä¸´å‡ ä¸ªé—®é¢˜ï¼š</p>
<h3 id="1-useEffect-fn-å’Œ-componentDidMount-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#1-useEffect-fn-å’Œ-componentDidMount-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="1. useEffect(fn, []) å’Œ componentDidMount æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>1. useEffect(fn, []) å’Œ componentDidMount æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>è™½ç„¶ useEffect(fn, [])  å’Œ componentDidMount  éƒ½å¯ä»¥è¡¨ç¤ºç»„ä»¶åŠ è½½æ—¶æ‰§è¡Œï¼Œä½†ä»ç»†èŠ‚ä¸Šä¸¤è€…æœ‰æ‰€ä¸åŒã€‚è¦è°ˆèµ·ç»†èŠ‚éœ€ä»æºç ä¸­èŠèµ·ï¼Œå…·ä½“å¯çœ‹ React æºç é­”æœ¯å¸ˆå¡é¢‚çš„è¿™ç¯‡â€”â€”<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzkzMjIxNTcyMA==&mid=2247485312&idx=1&sn=c55814b0e864dce6133b8f0a8f4e8d65&source=41#wechat_redirect">useEffect(fn, [])å’ŒcDMæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a> äº†è§£ï¼Œè¿™é‡Œæˆ‘è®²ä¸‹æˆ‘çš„ç†è§£</p>
<p>æºç ä¸­æŠŠè™šæ‹ŸDOMå’Œè™šæ‹ŸDOMæ¸²æŸ“åˆ°çœŸå®DOMåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µã€‚è™šæ‹ŸDOMå­˜åœ¨å†…å­˜ä¸­ï¼Œåœ¨ JSX ä¸­å¯¹æ•°æ®å¢åˆ æ”¹ï¼Œè™šæ‹ŸDOMä¼šå¯¹å¯¹åº”çš„æ•°æ®æ‰“ä¸Šæ ‡ç­¾ï¼Œè¿™ä¸ªé˜¶æ®µç§°ä¸º render é˜¶æ®µï¼›æŠŠè™šæ‹ŸDOMæ˜ å°„åˆ°çœŸå®DOMçš„æ“ä½œè¢«ç§°ä¸º commit é˜¶æ®µï¼Œå®ƒè´Ÿè´£æŠŠè¿™äº›æ ‡ç­¾è½¬æ¢ä¸ºå…·ä½“çš„DOMæ“ä½œ</p>
<p>åœ¨ render é˜¶æ®µ</p>
<ul>
<li>æ’å…¥ DOM å…ƒç´ è¢«æ‰“ä¸Š Placement æ ‡ç­¾ï¼›</li>
<li>æ›´æ–° DOM å…ƒç´ è¢«æ‰“ä¸Š Update æ ‡ç­¾ï¼›</li>
<li>åˆ é™¤ DOM å…ƒç´ è¢«æ‰“ä¸Š Deletion æ ‡ç­¾ï¼›</li>
<li>æ›´æ–° Ref å±æ€§è¢«æ‰“ä¸Š Ref æ ‡ç­¾</li>
<li>useEffect å›è°ƒè¢«æ‰“ä¸Š Passive æ ‡ç­¾</li>
</ul>
<p>è€Œ commit é˜¶æ®µåˆ†ä¸ºä¸‰ä¸ªå­é˜¶æ®µ</p>
<ul>
<li>æ¸²æŸ“è§†å›¾å‰ï¼ˆbefore mutation é˜¶æ®µï¼‰</li>
<li>æ¸²æŸ“è§†å›¾æ—¶ï¼ˆmutation é˜¶æ®µï¼‰</li>
<li>æ¸²æŸ“è§†å›¾åï¼ˆlayout é˜¶æ®µï¼‰</li>
</ul>
<p>è¢«æ‰“ä¸Š Placement æ ‡ç­¾çš„ï¼Œä¼šåœ¨ mutation é˜¶æ®µæ—¶æ‰§è¡Œå¯¹åº”çš„ appendChild æ“ä½œï¼Œæ„å‘³ç€ DOM èŠ‚ç‚¹è¢«æ’å…¥åˆ°è§†å›¾ä¸­ï¼Œæ¥ç€åœ¨ layout é˜¶æ®µè°ƒç”¨ componentDidMount </p>
<p>è€Œè¢«æ‰“ä¸Š Passive æ ‡ç­¾çš„ï¼Œå®ƒä¼šåœ¨ commit é˜¶æ®µçš„ä¸‰ä¸ªå­é˜¶æ®µæ‰§è¡Œå®Œæˆåå†å¼‚æ­¥è°ƒç”¨ useEffect çš„å›è°ƒå‡½æ•°</p>
<p>ç”±æ­¤å¯è§ï¼Œå®ƒä»¬çš„è°ƒç”¨<strong>è°ƒç”¨æ—¶æœº</strong>æ˜¯ä¸åŒçš„ï¼ŒuseEffect(fn,[]) æ˜¯åœ¨ commit é˜¶æ®µæ‰§è¡Œå®Œä»¥åå¼‚æ­¥è°ƒç”¨å›è°ƒå‡½æ•°ï¼Œè€Œ componentDidMount ä¼šåœ¨ commit é˜¶æ®µå®Œæˆè§†å›¾æ›´æ–°ï¼ˆmutationé˜¶æ®µï¼‰åå† layout é˜¶æ®µåŒæ­¥è°ƒç”¨</p>
<blockquote>
<p>hooks ä¸­ä¹Ÿæœ‰ä¸€ä¸ªå’Œ componentDidMount è°ƒç”¨æ—¶æœºç›¸åŒçš„ hooksâ€”â€”useLayoutEffect</p>
</blockquote>
<p>å…¶æ¬¡useEffect(fn, []) ä¼šæ•è· props å’Œstateï¼Œè€Œ componentDidMount å¹¶ä¸ä¼šã€‚ä½¿ç”¨ useEffect(fn, []) çš„ä¼šç¬¬å“¦å•Šå‡½æ•°ä¼šæ‹¿åˆ°åˆå§‹çš„ props å’Œ stateï¼Œè¿™ä¸ªé“ç†å’Œ capture value æ˜¯ä¸€ä¸ªé“ç†</p>
<p>æ€»ç»“ï¼šä¸¤ç‚¹ä¸åŒï¼Œä¸€ã€æ‰§è¡Œæ—¶æœºä¸åŒï¼›äºŒã€useEffect(fn, []) ä¼šå¯¹ props å’Œ state è¿›è¡Œæ•è·</p>
<blockquote>
<p>ä¸‹æ–‡ä¼šç”¨demoè¯´æ˜ capture value ç‰¹æ€§</p>
</blockquote>
<h3 id="2-æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±çš„-props-å’Œ-state"><a href="#2-æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±çš„-props-å’Œ-state" class="headerlink" title="2. æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±çš„ props å’Œ state"></a>2. æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±çš„ props å’Œ state</h3><p>å…ˆè®¨è®ºä¸€ä¸‹æ¸²æŸ“ï¼ˆrenderingï¼‰ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªè®¡æ•°å™¨ç»„ä»¶ Counter</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç‚¹å‡» &#123;count&#125; æ¬¡<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;</span></span><br><span class="line"><span class="language-xml">        ç‚¹å‡»</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ï¼Œcount çš„åˆå§‹å€¼ä» useState(0) ä¸­è·å–ã€‚å½“è°ƒç”¨ setCount(count + 1) ï¼ŒReact é‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œæ­¤æ—¶ count çš„å€¼å°±æˆ 1ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Mount ç¬¬ä¸€æ¬¡æ¸²æŸ“</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> count = <span class="number">0</span>; <span class="comment">// é»˜è®¤ä»useState ä¸­è·å¾—</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>ç‚¹å‡» &#123;count&#125; æ¬¡<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Update ç‚¹å‡» 1 æ¬¡</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> count = <span class="number">1</span>; <span class="comment">// é€šè¿‡ setCount ä¿®æ”¹ count</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>ç‚¹å‡» &#123;count&#125; æ¬¡<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Update ç‚¹å‡» 2 æ¬¡</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Counter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> count = <span class="number">2</span>; <span class="comment">//  é€šè¿‡ setCount ä¿®æ”¹ count</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>ç‚¹å‡» &#123;count&#125; æ¬¡<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¯å½“æˆ‘ä»¬æ›´æ–°çŠ¶æ€æ—¶ï¼ŒReact ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚æ¯æ¬¡æ¸²æŸ“è·å¾—æ­¤åˆ»ï¼ˆå¿«ç…§ï¼‰çš„ count çŠ¶æ€</p>
<p>è€Œåœ¨ç±»ç»„ä»¶ä¸­å¹¶ä¸æ˜¯æ•è·å€¼</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ClassDemo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">count</span> + <span class="number">1</span> &#125;);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>æˆ‘æ˜¯Class Component, &#123;this.state.count&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é¡µé¢ä¸Šçš„ count ä¼šæ¯éš”ä¸€ç§’é’ŸåŠ 1ï¼Œè€Œæ¢æˆå‡½æ•°å¼ç»„ä»¶</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">FunctionDemo</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> id = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">setCount</span>(count + <span class="number">1</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearInterval</span>(id);</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>æˆ‘æ˜¯Function Component, &#123;count&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>æ°¸è¿œæ˜¯1</p>
<p>è¿™å°±æ˜¯ hooks çš„capture valueï¼Œç±»ä¼¼ä¾‹å­åœ¨<a href="https://blog.azhubaby.com/2022/03/01/2022-03-01-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6%E4%B8%8E%E7%B1%BB%E7%BB%84%E4%BB%B6%E6%9C%89%E4%BD%95%E4%B8%8D%E5%90%8C/">å‡½æ•°å¼ç»„ä»¶ä¸ç±»ç»„ä»¶æœ‰ä½•ä¸åŒ</a>ä»‹ç»è¿‡</p>
<p>å¯å‰å¾€<a target="_blank" rel="noopener" href="https://codesandbox.io/s/weathered-water-6yfdtf?file=/src/ClassDemo.js:175-266">çº¿ä¸Šdemo</a>æŸ¥çœ‹</p>
<h2 id="useLayoutEffect"><a href="#useLayoutEffect" class="headerlink" title="useLayoutEffect"></a>useLayoutEffect</h2><p>ä½œç”¨ï¼šåŒæ­¥æ‰§è¡Œå‰¯ä½œç”¨</p>
<p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä½¿ç”¨ useEffect å°±å¯ä»¥å¸®æˆ‘ä»¬å¤„ç†å‰¯ä½œç”¨ï¼Œä½†æ˜¯å¦‚æœæƒ³è¦åŒæ­¥è°ƒç”¨ä¸€äº›å‰¯ä½œç”¨ï¼Œæ¯”å¦‚å¯¹ DOM çš„æ“ä½œï¼Œå°±éœ€è¦ä½¿ç”¨ useLayoutEffectï¼ŒuseLayoutEffect ä¸­çš„å‰¯ä½œç”¨ä¼šåœ¨ DOM æ›´æ–°ä¹‹ååŒæ­¥æ‰§è¡Œ</p>
<p>ä¸ç±»ç»„ä»¶ä¸­çš„ componentDidMount æ•ˆæœä¸€è‡´ï¼Œéƒ½æ˜¯åœ¨ commit é˜¶æ®µå®Œæˆè§†å›¾æ›´æ–°ï¼ˆmutationé˜¶æ®µï¼‰ååœ¨ layouté˜¶æ®µåŒæ­¥è°ƒç”¨</p>
<h2 id="useCallback"><a href="#useCallback" class="headerlink" title="useCallback"></a>useCallback</h2><p>ä½œç”¨ï¼šè®°å¿†å‡½æ•°ï¼Œé¿å…å‡½æ•°é‡æ–°ç”Ÿæˆã€‚åœ¨å‡½æ•°ä¼ é€’ç»™å­ç»„ä»¶æ—¶ï¼Œå¯ä»¥é¿å…å­ç»„ä»¶é‡å¤æ¸²æŸ“</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> memoizedCallback = <span class="title function_">useCallback</span>(</span><br><span class="line">  <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">doSomething</span>(a, b);</span><br><span class="line">  &#125;,</span><br><span class="line">  [a, b],</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>å¯ç¼“å­˜çš„å¼•ç”¨</p>
<p>åœ¨ç±»ç»„ä»¶ä¸­å¸¸å›°æ‰°äººçš„æ˜¯ this ç»‘å®šé—®é¢˜</p>
<ol>
<li> render æ–¹æ³•ä¸­ä½¿ç”¨bind</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;this &gt; &#x27;</span>, <span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick.bind(this)&#125;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>renderæ–¹æ³•ä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;this &gt; &#x27;</span>, <span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">        	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span> =&gt;</span> this.handleClick(e)&#125;&gt;test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>æ„é€ å‡½æ•°ä¸­bind</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(props);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">handleClick</span> = <span class="variable language_">this</span>.<span class="property">handleClick</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;this &gt; &#x27;</span>, <span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.åœ¨å®šä¹‰é˜¶æ®µä½¿ç”¨ç®­å¤´å‡½æ•°ç»‘å®š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    handleClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;this &gt; &#x27;</span>, <span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">        	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‰ä¸‰ç§éƒ½ä¼šå›  App ç»„ä»¶çš„propsæˆ–state å˜åŒ–è€Œé‡æ–°è§¦å‘æ¸²æŸ“ï¼Œä½¿å…¶æ¸²æŸ“æ–°çš„handleClickã€‚ç¬¬å››ç§å°†handleClickæŠ½ç¦»å‡ºèµ‹å€¼ä¸ºå˜é‡ï¼Œé€šè¿‡ this æŒ‡å‘å­˜å‚¨å‡½æ•°ï¼Œèµ·åˆ°äº†ç¼“å­˜ä½œç”¨</p>
<p>è€Œå‡½æ•°å¼ç»„ä»¶ä¸€å®šä¼šæ¸²æŸ“</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handleClick</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Click&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">    	<span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ useCallback èƒ½ç¼“å­˜å‡½æ•°ï¼Œè®©å®ƒâ€è®°ä½â€œ</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> handleClick = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Click&#x27;</span>);</span><br><span class="line">    &#125;, [])</span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">    	 <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Demo</span> <span class="attr">handleClick</span>=<span class="string">&#123;handleClick&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä½†ä½¿ç”¨ useCallback å¿…é¡»ä½¿ç”¨ shouldComponentUpdate æˆ–è€… React.memo æ¥å¿½ç•¥åŒæ ·çš„å‚æ•°é‡å¤æ¸²æŸ“</strong></p>
<p>æ‰€ä»¥å•ç‹¬ä½¿ç”¨ useCallback æ˜¯ä¸èƒ½çš„ï¼Œå®ƒéœ€è¦å’Œ React.memo é…åˆ</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Demo</span>(<span class="params">props</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;props.handleClick&#125;</span>&gt;</span>test<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">MemoDemo</span> = <span class="title function_">memo</span>(<span class="title class_">Demo</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> handleClick = <span class="title function_">useCallback</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Click&#x27;</span>);</span><br><span class="line">    &#125;, [])</span><br><span class="line">	<span class="keyword">return</span> (</span><br><span class="line">    	 <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Demo</span> <span class="attr">handleClick</span>=<span class="string">&#123;handleClick&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ useCallback ä¼šä½¿ä»£ç å¯è¯»æ€§å˜å·®ï¼Œæ‰€ä»¥å°½é‡ä¸ç”¨ useCallback</p>
<p>ä¸ç”¨ useCallback ï¼Œé‚£æ€ä¹ˆæé«˜æ€§èƒ½å‘¢ï¼Ÿ</p>
<h2 id="useMemo"><a href="#useMemo" class="headerlink" title="useMemo"></a>useMemo</h2><p>ä½œç”¨ï¼šè®°å¿†ç»„ä»¶ã€‚æ›¿ä»£ç±»ç»„ä»¶çš„shouldComponentUpdate</p>
<p>useCallback çš„åŠŸèƒ½å®Œå…¨å¯ä»¥ç”± useMemo æ‰€å–ä»£ï¼Œå¦‚æœä½ æƒ³é€šè¿‡ useMemo è¿”å›ä¸€ä¸ªè®°å¿†å‡½æ•°ä¹Ÿæ˜¯å®Œå…¨å¯ä»¥çš„</p>
<p><code>useCallback(fn, deps)</code> ç›¸å½“äº <code>useMemo(() =&gt; fn, deps)</code></p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> memoizedValue = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> <span class="title function_">computeExpensiveValue</span>(a, b), [a, b]);</span><br></pre></td></tr></table></figure>

<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœ React çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå®ƒåŒ…å«çš„æ‰€æœ‰å­ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ï¼Œå³ä½¿å­ç»„ä»¶æ²¡æœ‰ä»»ä½•å˜åŒ–</p>
<p>useMemo å’Œ useCallback æ¥å—çš„å‚æ•°éƒ½æ˜¯ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨å…¶ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–åæ‰§è¡Œï¼Œéƒ½æ˜¯è¿”å›ç¼“å­˜çš„å€¼ï¼ŒåŒºåˆ«åœ¨äº useMemo è¿”å›çš„æ˜¯å‡½æ•°è¿è¡Œçš„ç»“æœï¼ŒuseCallback è¿”å›çš„æ˜¯å‡½æ•°</p>
<p>useMemo è¿”å›çš„æ˜¯ä¸€ä¸ªå€¼ï¼Œç”¨äºé¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½è¿›è¡Œé«˜å¼€é”€çš„è®¡ç®—</p>
<h4 id="useCallback-VS-useMemo"><a href="#useCallback-VS-useMemo" class="headerlink" title="useCallback VS useMemo"></a>useCallback VS useMemo</h4><p>ç›¸åŒç‚¹ï¼šuseCallback å’Œ useMemo éƒ½æ˜¯æ€§èƒ½ä¼˜åŒ–çš„æ‰‹æ®µï¼Œç±»ä¼¼äºç±»ç»„ä»¶çš„ shouldComponentUpdateï¼Œåœ¨å­ç»„ä»¶ä¸­ä½¿ç”¨ shouldComponentUpdateï¼Œåˆ¤æ–­è¯¥ç»„ä»¶çš„ props å’Œ state æœ‰æ²¡æœ‰å˜åŒ–ï¼Œä»è€Œé¿å…æ¯æ¬¡çˆ¶ç»„ä»¶ render æ—¶é‡æ–°æ¸²æŸ“å­ç»„ä»¶</p>
<p>åŒºåˆ«ï¼šuseCallback å’Œ useMemo çš„åŒºåˆ«æ˜¯ useCallback è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“æŠŠå®ƒè¿”å›çš„è¿™ä¸ªå‡½æ•°ä½œä¸ºå­ç»„ä»¶ä½¿ç”¨æ—¶ï¼Œå¯ä»¥é¿å…æ¯æ¬¡çˆ¶ç»„ä»¶æ›´æ–°æ—¶é‡æ–°æ¸²æŸ“è¿™ä¸ªå­ç»„ä»¶</p>
<h2 id="memo"><a href="#memo" class="headerlink" title="memo"></a>memo</h2><p>ä½œç”¨ï¼šé¿å…é‡æ–°æ¸²æŸ“</p>
<p>åªæœ‰å½“ props æ”¹å˜æ—¶ä¼šé‡æ–°æ¸²æŸ“å­ç»„ä»¶</p>
<p>è¢« memo åŒ…è£¹ä½åï¼Œå½“ props ä¸å˜æ—¶ï¼Œå­ç»„ä»¶å°±ä¸ä¼šæ¸²æŸ“</p>
<p>React.memo() æ–¹æ³•å¯ä»¥é˜²æ­¢å­ç»„ä»¶ä¸å¿…è¦æ¸²æŸ“ï¼Œä»è€Œæä¾›ç»„ä»¶æ€§èƒ½ã€‚</p>
<p>å…³äºæ€§èƒ½ä¼˜åŒ– Dan æ›¾å†™è¿‡ä¸€ç¯‡æ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://overreacted.io/zh-hans/before-you-memo/">åœ¨ä½ å†™memo()ä¹‹å‰</a>ï¼Œå…¶å®åœ¨æˆ‘ä»¬ä½¿ç”¨ useCallbackã€useMemoã€memoå‰ä¸å¦¨è¯•è¯• state ä¸‹ç§»å’Œå†…å®¹æå‡ã€‚ç›®çš„å°±æ˜¯è®©ä¸ç”¨æ¸²æŸ“çš„ç»„ä»¶ä¸é‡å¤æ¸²æŸ“</p>
<h2 id="useRef"><a href="#useRef" class="headerlink" title="useRef"></a>useRef</h2><p>ä½œç”¨ï¼š</p>
<p>ä¿å­˜å¼•ç”¨å€¼ï¼Œè·Ÿ createRef ç±»ä¼¼ã€‚æˆ‘ä»¬ä¹ æƒ¯ç”¨ ref ä¿å­˜ DOM</p>
<p>ä½¿ç”¨ useRef ä¿å­˜å’Œæ›´æ–°ä¸€äº›æ•°æ®æ˜¯æœ‰ä¸€å®šå¥½å¤„çš„ï¼Œ<strong>å®ƒå¯ä»¥ä¸é€šè¿‡å†…å­˜æ¥ä¿å­˜æ•°æ®</strong>ï¼Œä½¿å¾—è¿™äº›æ•°æ®å†é‡æ¸²æŸ“æ—¶ä¸ä¼šè¢«æ¸…é™¤æ‰</p>
<p>å®ƒä¸ä»…ä»…æ˜¯ç”¨æ¥ç®¡ç†DOM ref çš„ï¼Œå®ƒè¿˜ç›¸å½“äº thisï¼Œå¯ä»¥å­˜æ”¾ä»»ä½•å˜é‡ï¼Œå¾ˆå¥½çš„è§£å†³é—­åŒ…å¸¦æ¥çš„ä¸æ–¹ä¾¿æ€§</p>
<p>å¦‚æœæˆ‘ä»¬æƒ³åˆ©ç”¨æ™®é€šçš„å˜é‡å†é‡æ¸²æŸ“è¿‡ç¨‹ä¸­è¿½è¸ªæ•°æ®å˜åŒ–æ˜¯ä¸å¯è¡Œçš„ï¼Œå› ä¸ºæ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶å®ƒéƒ½ä¼šè¢«é‡æ–°åˆå§‹åŒ–ã€‚ç„¶è€Œï¼Œå¦‚æœä½¿ç”¨ ref çš„è¯ï¼Œå…¶ä¸­çš„æ•°æ®èƒ½åœ¨æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶ä¿æŒä¸å˜ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [count, setCount] = useState&lt;number&gt;(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">const</span> countRef = useRef&lt;number&gt;(count)</span><br></pre></td></tr></table></figure>

<p>åœ¨<a href="https://blog.azhubaby.com/2022/03/01/2022-03-01-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6%E4%B8%8E%E7%B1%BB%E7%BB%84%E4%BB%B6%E6%9C%89%E4%BD%95%E4%B8%8D%E5%90%8C/">å‡½æ•°å¼ç»„ä»¶ä¸ç±»ç»„ä»¶æœ‰ä½•ä¸åŒ</a>ä»‹ç»è¿‡ä½¿ç”¨æ–¹æ³•</p>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><p>useContextï¼šå‡å°‘ç»„ä»¶å±‚çº§</p>
<p>useReducerï¼š ç±» redux çš„æ–¹æ³•ï¼ŒuseState æ˜¯åŸºäºå®ƒæ‰©å¼ çš„</p>
<p>ForwardRefï¼šè½¬å‘ ref</p>
<p>useImperativeHandle ï¼šé€ä¼  Refï¼Œçˆ¶ç»„ä»¶è·å–å­ç»„ä»¶å†…çš„æ–¹æ³•</p>
<h2 id="è‡ªå®šä¹‰-Hooks"><a href="#è‡ªå®šä¹‰-Hooks" class="headerlink" title="è‡ªå®šä¹‰ Hooks"></a>è‡ªå®šä¹‰ Hooks</h2><p>ç”±äº useState å’Œ useEffect æ˜¯å‡½æ•°è°ƒç”¨ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥å°†å…¶ç»„åˆæˆè‡ªå·±çš„ Hooks</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">MyResponsiveComponent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> width = <span class="title function_">useWindowWidth</span>();</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">    	<span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span> Window width is &#123;width&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>	</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useWindowWidth</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> [width, setWidth] = <span class="title function_">useState</span>(<span class="variable language_">window</span>,innerWidth);</span><br><span class="line">    <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="title function_">handleResize</span> = (<span class="params"></span>) =&gt; <span class="title function_">setWidth</span>(<span class="variable language_">window</span>.<span class="property">innerWidth</span>)</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, handleResize)</span><br><span class="line">        <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, handleResize)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> width;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è‡ªå®šä¹‰ Hooks è®©ä¸åŒçš„ç»„ä»¶å…±äº«å¯é‡ç”¨çš„çŠ¶æ€é€»è¾‘ã€‚æ³¨æ„çŠ¶æ€æœ¬èº«æ˜¯ä¸å…±äº«çš„ã€‚æ¯æ¬¡è°ƒç”¨ Hook éƒ½åªå£°æ˜äº†å…¶è‡ªèº«çš„ç‹¬ç«‹çŠ¶æ€</p>
<h2 id="React-Hooksçš„ä¸è¶³"><a href="#React-Hooksçš„ä¸è¶³" class="headerlink" title="React Hooksçš„ä¸è¶³"></a>React Hooksçš„ä¸è¶³</h2><p>è™½ç„¶å®ç°äº†å¤§å¤šæ•°ç±»ç»„ä»¶çš„åŠŸèƒ½ï¼Œä½†æ˜¯è¿˜æ— æ³•å®ç° getSnapshotBeforeUpdate å’Œ componentDidCatch è¿™ä¸¤ä¸ª API</p>
<h2 id="é™„å½•ï¼šä½¿ç”¨è§„åˆ™"><a href="#é™„å½•ï¼šä½¿ç”¨è§„åˆ™" class="headerlink" title="é™„å½•ï¼šä½¿ç”¨è§„åˆ™"></a>é™„å½•ï¼šä½¿ç”¨è§„åˆ™</h2><p>Hooks çš„æœ¬è´¨å°±æ˜¯ JavaScript å‡½æ•°ï¼Œåœ¨ä½¿ç”¨å®ƒæ—¶éœ€è¦éµå®ˆ<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/hooks-rules.html">ä¸¤æ¡è§„åˆ™</a></p>
<blockquote>
<h4 id="åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨-Hook"><a href="#åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨-Hook" class="headerlink" title="åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨ Hook"></a>åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨ Hook</h4><p><strong>ä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨ Hook</strong>ï¼Œç¡®ä¿æ€»æ˜¯åœ¨ä½ çš„ React å‡½æ•°çš„æœ€é¡¶å±‚ä»¥åŠä»»ä½• return ä¹‹å‰è°ƒç”¨ä»–ä»¬ã€‚éµå®ˆè¿™æ¡è§„åˆ™ï¼Œä½ å°±èƒ½ç¡®ä¿ Hook åœ¨æ¯æ¬¡æ¸²æŸ“ä¸­éƒ½æŒ‰ç…§åŒæ ·çš„é¡ºåºè¢«è°ƒç”¨ã€‚è¿™è®© React èƒ½å¤Ÿåœ¨å¤šæ¬¡çš„ useState å’Œ useEffect è°ƒç”¨ä¹‹é—´ä¿æŒ hook çŠ¶æ€çš„æ­£ç¡®</p>
<h4 id="åªåœ¨-React-å‡½æ•°ä¸­è°ƒç”¨-Hook"><a href="#åªåœ¨-React-å‡½æ•°ä¸­è°ƒç”¨-Hook" class="headerlink" title="åªåœ¨ React å‡½æ•°ä¸­è°ƒç”¨ Hook"></a>åªåœ¨ React å‡½æ•°ä¸­è°ƒç”¨ Hook</h4><p>ä¸è¦å†æ™®é€šçš„ JavaScript å‡½æ•°ä¸­è°ƒç”¨ Hookï¼Œä½ å¯ä»¥ï¼š</p>
<ul>
<li>åœ¨ React çš„å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ Hook</li>
<li>åœ¨è‡ªå®šä¹‰ Hook ä¸­è°ƒç”¨å…¶ä»– Hook</li>
</ul>
</blockquote>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903815762673671">ã€Reactæ·±å…¥ã€‘ä»Mixinåˆ°HOCå†åˆ°Hook</a></li>
<li><a target="_blank" rel="noopener" href="https://overreacted.io/zh-hans/a-complete-guide-to-useeffect/">useEffect å®Œæ•´æŒ‡å—</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/5dd64ae6f265da478b00e639">useCallbackã€useMemo åˆ†æä»¥åŠå·®åˆ«</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/happylindz/blog/issues/19">åä¸ªæ¡ˆä¾‹å­¦ä¼š React Hooks</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/MzpUROCRYPpwOycI2sz3lQ">useEffect, useCallback, useMemoä¸‰è€…æœ‰ä½•åŒºåˆ«</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzI1ODE4NzE1Nw==&mid=2247488110&idx=1&sn=f7c142fb65259f22773bb2bad4ccf8ca&chksm=ea0d5894dd7ad18236c174f1b5776f933473c7d6e3d3f95b3f57516d5594552ad7414198d1f4&scene=126&sessionid=1617017984&key=74e411ceb40c53ecceeb837c57022e68713e07c93481427e7e48bce03a829b9867bfe6e59e4db1e1b7bcf1db392c63aecc4ac96c0d04c594bf4f1dcaadb7e77fc37f8e6cb0405ba447bbd29ac158bdfe5f8d98515a27c910f031d65e34617eaa75ab601ef2a0780a16db37bc7c58280e68401ba0ae105a59274bb9a0ed6d1d16&ascene=1&uin=MTA0NTY0NDM2MQ==&devicetype=Windows+10+x64&version=62090070&lang=zh_CN&exportkey=ATPQQ5EDyogKCw2h+uLo8yA=&pass_ticket=rOrDQ7aYmbIfx6AGR+Uc8RcjMfmD7fSjUCfVAc87kvPd+MLrrXll+mIbzLV5R7OT&wx_header=0">React hooks æœ€ä½³å®è·µã€æ›´æ–°ä¸­ã€‘</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.cn/post/6948748617817522206">React Hooks ä¸‡å­—æ€»ç»“</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/-WLQPNHF2zzPB1v1Lwkw1w">ã€ŒReactä¸‡å­—åŸºç¡€å…¨é¢å‰–æã€</a></li>
<li><a target="_blank" rel="noopener" href="https://felixgerschau.com/react-hooks-separation-of-concerns/">Separation of concerns with React hooks</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/357020049/answer/909484669?utm_source=wechat_session&utm_medium=social&utm_oi=56197411504128&utm_content=group2_Answer&utm_campaign=shareopn">å¦‚ä½•å»åˆç†ä½¿ç”¨ React hookï¼Ÿ</a></li>
<li><a target="_blank" rel="noopener" href="https://alexsidorenko.com/blog/react-render-always-rerenders/">ä½¿ç”¨ React.memo() æé«˜ç»„ä»¶æ€§èƒ½</a></li>
<li><a target="_blank" rel="noopener" href="https://alexsidorenko.com/blog/react-render-always-rerenders/">react-render-always-rerenders</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzkzMjIxNTcyMA==&mid=2247485312&idx=1&sn=c55814b0e864dce6133b8f0a8f4e8d65&source=41#wechat_redirect">useEffect(fn, [])å’ŒcDMæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></li>
<li><a target="_blank" rel="noopener" href="https://overreacted.io/zh-hans/before-you-memo/">åœ¨ä½ å†™memo()ä¹‹å‰</a></li>
</ul>
</div><div class="tags"><a href="/tags/React/"><i class="fa fa-tag"></i>React</a><a href="/tags/Hooks/"><i class="fa fa-tag"></i>Hooks</a></div><div class="post-nav"><a class="pre" href="/2022/03/08/2022-03-08-Promise%E9%9D%A2%E8%AF%95%E9%A2%98%E6%80%9D%E8%80%83%E5%BB%B6%E4%BC%B8/">Promiseé¢è¯•é¢˜æ€è€ƒå»¶ä¼¸</a><a class="next" href="/2022/03/01/2022-03-01-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6%E4%B8%8E%E7%B1%BB%E7%BB%84%E4%BB%B6%E6%9C%89%E4%BD%95%E4%B8%8D%E5%90%8C/">å‡½æ•°å¼ç»„ä»¶ä¸ç±»ç»„ä»¶æœ‰ä½•ä¸åŒ</a></div><div id="container"></div><link rel="stylesheet" type="text/css" href="//unpkg.com/gitalk/dist/gitalk.css?v=1.0.1"><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=1.0.1"></script><script type="text/javascript" src="//unpkg.com/gitalk/dist/gitalk.min.js?v=1.0.1"></script><script>var gitalk = new Gitalk({
  clientID: 'ff0c33d53db26a5b1424',
  clientSecret: 'd42b8e0556a1f4e20667e0a48c1adb9eca12d6ee',
  repo: 'blog',
  owner: 'johanazhu',
  admin: ['johanazhu'],
  id: md5(location.pathname),
  distractionFreeMode: false
})
gitalk.render('container')
</script></div></div></div><div id="secondary"><div class="widget"><div class="widget-title"><h3> æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·</h3></div><div class="wechatwidget"><a href="#"><img src="https://s2.loli.net/2022/03/25/VqfD2ScLuKzjbR8.jpg"/></a><span>å¾®ä¿¡å·ï¼šjohanbo88</span></div></div><div class="widget"><div class="widget-title"><h3>æœ€è¿‘æ–‡ç« </h3></div><ul class="widget-list"><li class="widget-list-item"><a class="widget-list-link" href="/2023/03/02/2023-03-02-%E5%B0%9D%E8%AF%95%E7%94%A8WSL2+Ubuntu%E5%BC%80%E5%8F%91/">å°è¯•ç”¨ WSL2 + Ubuntu å¼€å‘</a></li><li class="widget-list-item"><a class="widget-list-link" href="/2023/02/13/2023-02-13-%E5%AE%89%E8%A3%85%20docker%20%E5%90%8E%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8/">å®‰è£… docker åæ— æ³•å¯åŠ¨</a></li><li class="widget-list-item"><a class="widget-list-link" href="/2023/01/09/2023-01-09-%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1hash%E3%80%81history%E7%9A%84%E5%AE%9E%E7%8E%B0/">å‰ç«¯è·¯ç”±hashã€historyçš„å®ç°</a></li><li class="widget-list-item"><a class="widget-list-link" href="/2022/12/10/2022-12-10-%E6%8F%90%E9%AB%98%E5%BC%80%E5%8F%91%E4%BD%93%E9%AA%8C%EF%BC%9Adev-container/">æ‰‹æŠŠæ‰‹æé«˜å¼€å‘ä½“éªŒï¼šdev-container</a></li><li class="widget-list-item"><a class="widget-list-link" href="/2022/10/09/2022-10-09-%E4%BB%8E%E9%9D%A2%E8%AF%95%E9%A2%98%E5%88%B0%E6%8F%92%E4%BB%B6%E6%9C%BA%E5%88%B6%E7%9A%84%E5%B0%8F%E6%80%9D%E8%80%83/">ä»é¢è¯•é¢˜åˆ°æ’ä»¶æœºåˆ¶çš„å°æ€è€ƒ</a></li></ul></div><div class="widget"><div class="widget-title"><h3> åˆ†ç±»</h3></div><ul class="widget-list"><li class="widget-list-item"><a class="widget-list-link" href="/categories/10X%E7%A8%8B%E5%BA%8F%E5%91%98/">10Xç¨‹åºå‘˜</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/HTTP/">HTTP</a><span class="widget-list-count">2</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">å‰ç«¯å¼€å‘</a><span class="widget-list-count">35</span><ul class="widget-list-child"><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/CSS/">CSS</a><span class="widget-list-count">6</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/JavaScript/">JavaScript</a><span class="widget-list-count">9</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/React/">React</a><span class="widget-list-count">12</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/umi/">umi</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%BC%80%E5%8F%91/">å¼€å‘</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1/">å¾®ä¿¡</a><span class="widget-list-count">3</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">æ€§èƒ½ä¼˜åŒ–</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">ç§»åŠ¨ç«¯</a><span class="widget-list-count">2</span></li></ul></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%AE%9E%E6%88%98/">å®æˆ˜</a><span class="widget-list-count">5</span><ul class="widget-list-child"><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%AE%9E%E6%88%98/%E5%85%AC%E5%8F%B8%E9%A1%B9%E7%9B%AE/">å…¬å¸é¡¹ç›®</a><span class="widget-list-count">3</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%AE%9E%E6%88%98/%E7%8B%AC%E7%AB%8B%E9%A1%B9%E7%9B%AE/">ç‹¬ç«‹é¡¹ç›®</a><span class="widget-list-count">2</span></li></ul></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%BA%93/">åº“</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%BC%80%E5%8F%91%E4%BD%93%E9%AA%8C/">å¼€å‘ä½“éªŒ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E6%9C%89%E7%9F%A5%E6%9C%89%E8%A1%8C/">æœ‰çŸ¥æœ‰è¡Œ</a><span class="widget-list-count">8</span><ul class="widget-list-child"><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E6%9C%89%E7%9F%A5%E6%9C%89%E8%A1%8C/%E5%86%99%E4%BD%9C/">å†™ä½œ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E6%9C%89%E7%9F%A5%E6%9C%89%E8%A1%8C/%E5%88%86%E4%BA%AB/">åˆ†äº«</a><span class="widget-list-count">4</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E6%9C%89%E7%9F%A5%E6%9C%89%E8%A1%8C/%E5%AD%A6%E4%B9%A0/">å­¦ä¹ </a><span class="widget-list-count">3</span></li></ul></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91/">æœåŠ¡ç«¯å¼€å‘</a><span class="widget-list-count">9</span><ul class="widget-list-child"><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91/Koa2/">Koa2</a><span class="widget-list-count">3</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91/Node/">Node</a><span class="widget-list-count">2</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91/%E9%83%A8%E7%BD%B2/">éƒ¨ç½²</a><span class="widget-list-count">4</span></li></ul></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E7%90%86%E8%B4%A2/">ç†è´¢</a><span class="widget-list-count">1</span><ul class="widget-list-child"><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E7%90%86%E8%B4%A2/%E5%8A%A0%E5%AF%86%E8%B4%A7%E5%B8%81/">åŠ å¯†è´§å¸</a><span class="widget-list-count">1</span></li></ul></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/">ç–‘éš¾æ‚ç—‡</a><span class="widget-list-count">2</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E7%A2%8E%E7%9A%AE%E6%89%AF%E6%B7%A1/">ç¢çš®æ‰¯æ·¡</a><span class="widget-list-count">2</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">ç¼–ç¨‹è¯­è¨€</a><span class="widget-list-count">8</span><ul class="widget-list-child"><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Git/">Git</a><span class="widget-list-count">3</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/JavaScript/">JavaScript</a><span class="widget-list-count">5</span></li></ul></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E8%BF%90%E7%BB%B4/">è¿ç»´</a><span class="widget-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><h3> å½’æ¡£</h3></div><ul class="widget-list"><li class="widget-list-item"><a class="widget-list-link" href="/archives/2023/03/">2023å¹´ä¸‰æœˆ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2023/02/">2023å¹´äºŒæœˆ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2023/01/">2023å¹´ä¸€æœˆ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/12/">2022å¹´åäºŒæœˆ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/10/">2022å¹´åæœˆ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/09/">2022å¹´ä¹æœˆ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/08/">2022å¹´å…«æœˆ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/07/">2022å¹´ä¸ƒæœˆ</a><span class="widget-list-count">2</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/05/">2022å¹´äº”æœˆ</a><span class="widget-list-count">2</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/04/">2022å¹´å››æœˆ</a><span class="widget-list-count">4</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/03/">2022å¹´ä¸‰æœˆ</a><span class="widget-list-count">7</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/02/">2022å¹´äºŒæœˆ</a><span class="widget-list-count">8</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/01/">2022å¹´ä¸€æœˆ</a><span class="widget-list-count">5</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2021/12/">2021å¹´åäºŒæœˆ</a><span class="widget-list-count">8</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2021/11/">2021å¹´åä¸€æœˆ</a><span class="widget-list-count">8</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2021/10/">2021å¹´åæœˆ</a><span class="widget-list-count">5</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2021/09/">2021å¹´ä¹æœˆ</a><span class="widget-list-count">5</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2021/08/">2021å¹´å…«æœˆ</a><span class="widget-list-count">8</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2021/05/">2021å¹´äº”æœˆ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2021/04/">2021å¹´å››æœˆ</a><span class="widget-list-count">2</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2021/02/">2021å¹´äºŒæœˆ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2020/11/">2020å¹´åä¸€æœˆ</a><span class="widget-list-count">3</span></li></ul></div><div class="widget"><div class="widget-title"><h3>å‹æƒ…é“¾æ¥</h3></div><ul></ul><a href="https://azhubaby.com/" title="ä¸ªäººç½‘ç«™" target="_blank">ä¸ªäººç½‘ç«™</a><ul></ul><a href="https://fe.azhubaby.com/" title="äº”å¹´å‰ç«¯ä¸‰å¹´é¢è¯•" target="_blank">äº”å¹´å‰ç«¯ä¸‰å¹´é¢è¯•</a></div></div></div></div></div><footer id="footer"><div class="container"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>Â© 2023 <span>æœ¬ç«™æ€»è®¿é—®é‡ï¼š<span id="busuanzi_value_site_pv"></span>&nbsp;æ¬¡</span>
<span>æ€»è®¿å®¢ï¼š<span id="busuanzi_value_site_uv"></span>äºº</span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo. &nbsp;</a>Theme by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></footer><link rel="stylesheet" type="text/css" href="/css/search.css?v=1.0.1"><script type="text/javascript" src="/js/search.js?v=1.0.1"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'search-input', 'search-results');
</script><script type="text/javascript" src="/js/copycode.js" successtext="å¤åˆ¶æˆåŠŸ!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.1"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.1"></script><div class="search-page"><div class="search-icon-close-container"><span class="search-icon-close"><i class="fa fa-chevron-down"></i></span></div><div class="search-main container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><form></form><input type="text" id="search-input" placeholder="searching..."><div class="mini-post-list" id="search-results"></div></div></div></div></div></body></html>