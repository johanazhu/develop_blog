<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="azhubabyçš„æŠ€æœ¯åšå®¢"><title>é¢è¯•é¢˜ï¼šæ¸²æŸ“åä¸‡æ¡æ•°æ®è§£å†³æ–¹æ¡ˆ | Azhubaby Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.1"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','G-QLGQ1V2DVG','auto');ga('send','pageview');
</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = 'https://hm.baidu.com/hm.js?' + 'b735438e944e58cd4b0914986a8f821c';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><div class="darkmode-toggle">ğŸŒ“</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 5.4.2"></head><body><header class="clearfix" id="header"><div class="container"><div class="col-group"><div class="site-name"><h1 class="hidden">é¢è¯•é¢˜ï¼šæ¸²æŸ“åä¸‡æ¡æ•°æ®è§£å†³æ–¹æ¡ˆ</h1><a id="logo" href="/.">Azhubaby Blog</a><p class="description">å…³äºç¼–ç¨‹ã€ä¸ªäººæˆé•¿ä»¥åŠæ€è€ƒ</p></div><div> <nav class="clearfix" id="nav-menu"><a class="current" href="/."><i class="fa undefined"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa undefined"> å½’æ¡£</i></a><a href="/tags/"><i class="fa undefined"> æ ‡ç­¾</i></a><a href="/about/"><i class="fa undefined"> å…³äº</i></a><a class="search-icon" href="javascript:void(0)"><i class="fa fa-search"></i></a></nav></div></div></div></header><div id="body"><div class="container"><div class="col-group"><div class="col-8" id="main"><div class="res-cons"><div class="post"><h1 class="post-title">é¢è¯•é¢˜ï¼šæ¸²æŸ“åä¸‡æ¡æ•°æ®è§£å†³æ–¹æ¡ˆ</h1><div class="post-meta">2022-02-09<span> | </span><span class="category"><a href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">å‰ç«¯å¼€å‘</a><!--busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js--><a href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/React/">React</a><!--busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js--></span><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> é˜…è¯»</span></span><span> | </span><span>ä½œè€…ï¼š</span><span class="author">è°·çˆ±å‡Œ</span></div><div class="post-content"><p>ç¬”è€…åœ¨ä¹‹å‰çš„é¢è¯•ä¸­é‡åˆ°è¿‡â€œä¸€æ¬¡æ€§ç»™ä½  10000 æ¡æ•°æ®ï¼Œæ€ä¹ˆè®©å®ƒä¸å¡ä¹‹ç±»çš„é—®é¢˜â€œï¼Œå½“åˆå‡†å¤‡ä¸å……åˆ†ï¼Œä¸çŸ¥é“æ€ä¹ˆå›ç­”è¿™ç±»é—®é¢˜ï¼Œè¯´çš„æ–¹æ¡ˆè¿‡äºç®€å•ï¼Œè¿˜æ‰¯åˆ°é˜²æŠ–èŠ‚æµä¹‹ç±»çš„æ€§èƒ½ä¼˜åŒ–ç‚¹ä¸Šï¼Œè¿™ç¯‡æ–‡ç« åŸæœ¬2022å¹´1æœˆ29æ—¥è®¡åˆ’å†™ï¼Œåå› æ˜¥èŠ‚è¿‡å¹´è€½è¯¯ï¼Œç›´è‡³è¿‘æ—¥åŠ¨ç¬”</p>
<p>æŸ¥é˜…èµ„æ–™åå‘ç°æœ‰ä¸‰ç§è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>è™šæ‹Ÿåˆ—è¡¨ï¼ˆä¹Ÿå«æŒ‰éœ€æ¸²æŸ“æˆ–å¯è§†åŒºåŸŸæ¸²æŸ“ï¼‰</li>
<li>å»¶è¿Ÿæ¸²æŸ“ï¼ˆå³æ‡’æ¸²æŸ“ï¼‰</li>
<li>æ—¶é—´åˆ†ç‰‡</li>
</ul>
<p>è™šæ‹Ÿåˆ—è¡¨æ˜¯æœ€ä¸»æµçš„è§£å†³æ–¹æ¡ˆï¼Œä¸æ¸²æŸ“æ‰€æœ‰çš„æ•°æ®ï¼Œåªæ¸²æŸ“å¯è§†åŒºåŸŸä¸­çš„æ•°æ®ã€‚å½“ç”¨æˆ·æ»‘ï¼ˆæ»šï¼‰åŠ¨æ—¶ï¼Œé€šè¿‡ç›‘å¬ scroll æ¥åˆ¤æ–­æ˜¯ä¸Šæ»‘è¿˜æ˜¯ä¸‹æ‹‰ï¼Œä»è€Œæ›´æ–°æ•°æ®ã€‚åŒç† IntersectionObserver å’Œ getBoundingClientRect éƒ½èƒ½å®ç°</p>
<p>å»¶è¿Ÿæ¸²æŸ“ï¼Œä¹Ÿå«æ‡’åŠ è½½ã€‚é¡¾åæ€ä¹‰ï¼Œæœ€å¼€å§‹ä¸æ¸²æŸ“æ‰€æœ‰æ•°æ®ï¼Œåªæ¸²æŸ“å¯è§†åŒºåŸŸä¸­çš„æ•°æ®ï¼ˆåŒè™šæ‹Ÿåˆ—è¡¨ä¸€è‡´ï¼‰ã€‚å½“æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨æ—¶ï¼Œæ·»åŠ æ•°æ®ï¼ˆconcatï¼‰ï¼Œè§†å›¾æ¸²æŸ“æ–°å¢DOM</p>
<p>æ—¶é—´åˆ†ç‰‡ä¸»è¦æ˜¯åˆ†æ‰¹æ¸²æŸ“DOMï¼Œä½¿ç”¨ requestAnimationFrame æ¥è®©åŠ¨ç”»æ›´åŠ æµç•…</p>
<p>å…ˆè¯´æœ€ä¸»æµçš„æ–¹æ¡ˆ</p>
<h2 id="è™šæ‹Ÿåˆ—è¡¨"><a href="#è™šæ‹Ÿåˆ—è¡¨" class="headerlink" title="è™šæ‹Ÿåˆ—è¡¨"></a>è™šæ‹Ÿåˆ—è¡¨</h2><h3 id="ä»€ä¹ˆæ˜¯è™šæ‹Ÿåˆ—è¡¨"><a href="#ä»€ä¹ˆæ˜¯è™šæ‹Ÿåˆ—è¡¨" class="headerlink" title="ä»€ä¹ˆæ˜¯è™šæ‹Ÿåˆ—è¡¨"></a>ä»€ä¹ˆæ˜¯è™šæ‹Ÿåˆ—è¡¨</h3><p>è™šæ‹Ÿåˆ—è¡¨æ˜¯æŒ‰éœ€æ˜¾ç¤ºçš„ä¸€ç§å®ç°ï¼Œå³åªå¯¹å¯è§åŒºåŸŸè¿›è¡Œæ¸²æŸ“ï¼Œå¯¹éå¯è§åŒºåŸŸä¸­çš„æ•°æ®ä¸æ¸²æŸ“æˆ–éƒ¨åˆ†æ¸²æŸ“çš„æŠ€æœ¯ï¼Œæ˜¯å¯¹é•¿åˆ—è¡¨æ¸²æŸ“çš„ä¼˜åŒ–æ‰‹æ®µ</p>
<p>è¯´çš„æ˜ç™½ä¸€ç‚¹ï¼Œå°±æ˜¯å±•ç¤ºå¯è§†åŒºåŸŸä¸­çš„å†…å®¹ï¼Œå½“ä½ å‘ä¸Šå‘ä¸‹æ»šåŠ¨æ—¶ï¼Œé€šè¿‡ DOM API æ›¿æ¢å¯è§†åŒºåŸŸä¸­çš„æ•°æ®ï¼Œåšåˆ°åŠ¨æ€åŠ è½½åä¸‡æ¡æ•°æ®</p>
<h3 id="ä¸¤ç§è§£å†³æ€è·¯"><a href="#ä¸¤ç§è§£å†³æ€è·¯" class="headerlink" title="ä¸¤ç§è§£å†³æ€è·¯"></a>ä¸¤ç§è§£å†³æ€è·¯</h3><p>å…³äºæ— é™æ»šåŠ¨ï¼Œæ—©æœŸé€šè¿‡ç›‘å¬ scroll äº‹ä»¶ï¼Œè¿™æ˜¯æœ€å¸¸è§çš„è§£å†³æ–¹æ¡ˆã€‚å¯å» <a href="https://blog.azhubaby.com/2022/01/22/2022-01-22-%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD/">å›¾ç‰‡æ‡’åŠ è½½</a> ä¸­æŸ¥çœ‹ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯é€šè¿‡å­é¡¹çš„ offsetTopï¼ˆåç§»é«˜åº¦ï¼‰ä¸ innerHeightï¼ˆè§†çª—é«˜åº¦ï¼‰+ scrollTopï¼ˆæ»šåŠ¨é«˜åº¦ï¼‰åšå¯¹æ¯”æ¥å®ç°ï¼Œå½“åç§»é«˜åº¦ &lt; è§†çª—é«˜åº¦+æ»šåŠ¨é«˜åº¦æ—¶ï¼Œè¯´æ˜å·²ç»æ»šåˆ°ä¸‹æ–¹ï¼Œå°±å¯å±•ç¤ºå›¾ç‰‡</p>
<p>åœ¨ <a href="https://blog.azhubaby.com/2022/01/22/2022-01-22-%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD/">å›¾ç‰‡æ‡’åŠ è½½</a> ä¸­æˆ‘ä»¬ä¹ŸæåŠ IntersectionObserverï¼ˆäº¤å‰è§‚å¯Ÿè€…ï¼‰APIï¼Œä»¥æ­¤æ¥è§£å†³ scroll æ‰€ä¸å…·å¤‡çš„æ•ˆæœï¼Œå³  IntersectionObserver API æ˜¯å¼‚æ­¥çš„ï¼Œä¸éšç›®æ ‡å…ƒç´ çš„æ»šåŠ¨åŒæ­¥è§¦å‘ï¼Œæ€§èƒ½æ¶ˆè€—å°ã€‚å½“ç„¶è¿˜å¯ä»¥é€šè¿‡ getBoundingClientRect æ¥å®ç°ï¼ŒgetBoundingClientRect æ–¹æ³•è¿”å›å…ƒç´ çš„å¤§å°æœºå™¨ç›¸å¯¹äºè§†çª—çš„ä½ç½®</p>
<blockquote>
<p>PSï¼šæ‰€ä»¥ç›®å‰æ¥è¯´æœ‰ä¸‰ç§æ–¹æ³•ï¼Œåœ¨æ–‡æœ« demo ä¸­ä¼šé™„ä¸Šå•ç‹¬ä½¿ç”¨è¿™ä¸‰ç§è§£å†³æ–¹æ¡ˆçš„ä»£ç </p>
</blockquote>
<p>åœ¨è¿™é‡Œï¼Œå› æœ¬äººå®åŠ›æœ‰é™ï¼Œæœªç ´è§£ getBoundingClientRect å‘ä¸Šæ»‘åŠ¨æ—¶çš„é¡µé¢æŠ–åŠ¨é—®é¢˜ï¼Œåªæœ‰ scroll å’Œ IntersectionObserver ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼ˆgetBoundingClientRect æ–¹æ³•ä¹Ÿæ”¾åœ¨ä»£ç ä¸­ï¼Œä½†å‘ä¸Šæ»‘åŠ¨ä¼šæŠ–åŠ¨ï¼‰</p>
<h4 id="scroll-è§£å†³æ–¹æ¡ˆ"><a href="#scroll-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="scroll è§£å†³æ–¹æ¡ˆ"></a>scroll è§£å†³æ–¹æ¡ˆ</h4><p>å…ˆè¯´ scroll è§£å†³æ–¹æ¡ˆï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯å¯¹å…¶ä¼ æ¥çš„æ•°æ®è¿›è¡Œåˆ†å‰²å±•ç¤ºï¼Œç”¨åˆ° slice æ–¹æ³•ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„</p>
<p>æˆ‘ä»¬å‡è®¾å•ä¸ªåˆ—è¡¨é«˜åº¦ä¸º 30pxï¼Œä¸€é¡µå±•ç¤ºçš„åˆ—è¡¨æ•°é‡ä¸º <code>const count = Math.ceil(åˆ—è¡¨é«˜åº¦ / 30)</code>ï¼Œå±•ç¤ºçš„æ•°æ®å°±æ˜¯ <code>visibleData = data.slice(start, start + count)</code>ï¼ˆstart ä¸€å¼€å§‹ä¸º0ï¼‰</p>
<p>å½“æ»šåŠ¨æ—¶ï¼ŒåŠ¨æ€ä¿®æ”¹ start å’Œ visibleData</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useEffect, useState, useRef &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">VirtualList</span> = props =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; data &#125; = props;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [start, setStart] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> [visibleCount, setVisibleCount] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> [visibleData, setVisibleData] = <span class="title function_">useState</span>([]);</span><br><span class="line">  <span class="keyword">const</span> virtualRef = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line">  <span class="keyword">const</span> virtualContentRef = <span class="title function_">useRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> count = <span class="title class_">Math</span>.<span class="title function_">ceil</span>(virtualRef.<span class="property">current</span>.<span class="property">clientHeight</span> / <span class="number">30</span>);</span><br><span class="line">    <span class="title function_">setVisibleCount</span>(count);</span><br><span class="line">    <span class="title function_">setVisibleData</span>(data.<span class="title function_">slice</span>(start, start + count));</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">onHandleScroll</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> scrollTop = virtualRef.<span class="property">current</span>.<span class="property">scrollTop</span>;</span><br><span class="line">    <span class="keyword">const</span> fixedScrollTop = scrollTop - (scrollTop % <span class="number">30</span>);</span><br><span class="line">    virtualContentRef.<span class="property">current</span>.<span class="property">style</span>.<span class="property">webkitTransform</span> = <span class="string">`translate3d(0, <span class="subst">$&#123;fixedScrollTop&#125;</span>px, 0)`</span>;</span><br><span class="line">    <span class="title function_">setStart</span>(<span class="title class_">Math</span>.<span class="title function_">floor</span>(scrollTop / <span class="number">30</span>));</span><br><span class="line">    <span class="title function_">setVisibleData</span>(data.<span class="title function_">slice</span>(start, start + visibleCount));</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;virtual-list&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;virtualRef&#125;</span> <span class="attr">onScroll</span>=<span class="string">&#123;onHandleScroll&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">className</span>=<span class="string">&quot;virtual-list-phantom&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">height:</span> <span class="attr">data.length</span> * <span class="attr">30</span> + &quot;<span class="attr">px</span>&quot; &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;virtual-list-content&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;virtualContentRef&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;visibleData.map(item =&gt; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;virtual-list-item&quot;</span> <span class="attr">key</span>=<span class="string">&#123;item.key&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;item.key&#125;</span></span><br><span class="line"><span class="language-xml">            &#123;item.value&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        ))&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">VirtualList</span>;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ³¨ï¼švirtual-list-phantom ä¼šè®©æ»šåŠ¨æ¡çœ‹èµ·æ¥å¾ˆé«˜ï¼Œä¸ªäººè®¤ä¸ºæœ‰æ— éƒ½ä¸å½±å“è§‚æ„Ÿ</p>
</blockquote>
<p>ï¼ˆæœ‰virtual-list-phantomï¼‰æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://s2.loli.net/2022/02/14/xQyHDCszI68qV94.gif" alt="è™šæ‹Ÿåˆ—è¡¨scrollæœ‰virtual-list-phantom"></p>
<p>ï¼ˆæ— virtual-list-phantomï¼‰æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://s2.loli.net/2022/02/14/abZn9hJiP6MEjyt.gif" alt="è™šæ‹Ÿåˆ—è¡¨scrollæ— virtual-list-phantom"></p>
<p>è¿™ç§æ–¹æ³•çš„ç²¾é«“åœ¨äºè®¾ç½®å¼€å§‹æ¸²æŸ“çš„ç‚¹å’Œå±•ç¤ºçš„æ•°æ®ï¼Œå½“ä»–æ»šåŠ¨æ—¶åŠ¨æ€ä¿®æ”¹ï¼Œä½†æ˜¯å› ä¸º scroll ä¼šé¢‘ç¹è§¦å‘ï¼Œå½“æ¸²æŸ“çš„æ•°æ®å˜å¤šåä¼šæœ‰æ€§èƒ½é—®é¢˜</p>
<h4 id="IntersectionObserver-è§£å†³æ–¹æ¡ˆ"><a href="#IntersectionObserver-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="IntersectionObserver è§£å†³æ–¹æ¡ˆ"></a>IntersectionObserver è§£å†³æ–¹æ¡ˆ</h4><p>é€šè¿‡ IntersectionObserver çš„ç‰¹æ€§ï¼Œå½“ç›®æ ‡å¯¹è±¡ä¸­çš„ entry.isIntersecting ä¸º true æˆ–è€… intersectionRatio &gt; 0 ï¼ˆå…ƒç´ ä¸ç¥–å…ˆå…ƒç´ äº¤å‰ã€å¯è§ï¼‰æ—¶ï¼Œè¯´æ˜æœ¬æ¥ä¸å¯è§çš„å…ƒç´ æµ®ç°åœ¨è§†å›¾ä¸­ï¼Œè¡¨ç¤ºå®ƒå‘ä¸Šæˆ–å‘ä¸‹æ»‘åŠ¨ï¼Œæˆ‘ä»¬åŠ¨æ€è®¾ç½®è§†å›¾ä¸­çš„é¡¶éƒ¨å’Œåº•éƒ¨ id å³å¯å¯¹å…¶åˆ¤æ–­ã€‚å½“ä¸‹æ»‘æ—¶ <code>entry.traget.id === &#39;bottom&#39;</code>ï¼Œæˆ‘ä»¬ä¿®æ”¹ start å’Œ endï¼›åŒç†ï¼Œå½“ä¸Šæ»‘æ—¶<code>entry.traget.id === &#39;top</code> æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¸€æ ·ä¿®æ”¹ start å’Œ end</p>
<p>é™„ä¸Šéƒ¨åˆ†ä»£ç ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">const</span> [start, setStart] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">const</span> [end, setEnd] = <span class="title function_">useState</span>(<span class="variable constant_">THRESHOLD</span>);</span><br><span class="line"><span class="keyword">const</span> [observer, setObserver] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line"><span class="keyword">const</span> bottomElement = <span class="title function_">useRef</span>();</span><br><span class="line"><span class="keyword">const</span> topElement = <span class="title function_">useRef</span>();</span><br><span class="line">...</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Observer</span> = <span class="keyword">new</span> <span class="title class_">IntersectionObserver</span>(callback, options);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">callback</span> = (<span class="params">entries, observer</span>) =&gt; &#123;</span><br><span class="line">    entries.<span class="title function_">forEach</span>(<span class="function"><span class="params">entry</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> dataLength = data.<span class="property">length</span>;</span><br><span class="line">        <span class="keyword">if</span> (entry.<span class="property">isIntersecting</span> &amp;&amp; entry.<span class="property">target</span>.<span class="property">id</span> === <span class="string">&quot;bottom&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> maxStartIndex = dataLength - <span class="number">1</span> - <span class="variable constant_">THRESHOLD</span>;</span><br><span class="line">            <span class="keyword">const</span> maxEndIndex = dataLength - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">const</span> newStart = end - <span class="number">5</span> &lt;= maxStartIndex ? end - <span class="number">5</span> : maxStartIndex;</span><br><span class="line">            <span class="keyword">const</span> newEnd = end + <span class="number">10</span> &lt;= maxEndIndex ? end + <span class="number">10</span> : maxEndIndex;</span><br><span class="line">            <span class="title function_">setStart</span>(newStart);</span><br><span class="line">            <span class="title function_">setEnd</span>(newEnd);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (entry.<span class="property">isIntersecting</span> &amp;&amp; entry.<span class="property">target</span>.<span class="property">id</span> === <span class="string">&quot;top&quot;</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> newEnd =</span><br><span class="line">                  end === <span class="variable constant_">THRESHOLD</span></span><br><span class="line">            ? <span class="variable constant_">THRESHOLD</span></span><br><span class="line">            : end - <span class="number">10</span> &gt; <span class="variable constant_">THRESHOLD</span></span><br><span class="line">            ? end - <span class="number">10</span></span><br><span class="line">            : <span class="variable constant_">THRESHOLD</span>;</span><br><span class="line">            <span class="keyword">const</span> newStart = start === <span class="number">0</span> ? <span class="number">0</span> : start - <span class="number">10</span> &gt; <span class="number">0</span> ? start - <span class="number">10</span> : <span class="number">0</span>;</span><br><span class="line">            <span class="title function_">setStart</span>(newStart);</span><br><span class="line">            <span class="title function_">setEnd</span>(newEnd);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> updatedList = data.<span class="title function_">slice</span>(start, end);</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">position:</span> &quot;<span class="attr">relative</span>&quot;, <span class="attr">textAlign:</span> &quot;<span class="attr">center</span>&quot; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;updatedList.map((item, index) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">        const top = height * (index + start) + &quot;px&quot;;</span></span><br><span class="line"><span class="language-xml">        const refVal = getReference(index, index === lastIndex);</span></span><br><span class="line"><span class="language-xml">        const id = index === 0 ? &quot;top&quot; : index === lastIndex ? &quot;bottom&quot; : &quot;&quot;;</span></span><br><span class="line"><span class="language-xml">        return (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">className</span>=<span class="string">&quot;io-virtual-list-item&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">key</span>=<span class="string">&#123;item.key&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">top</span> &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">ref</span>=<span class="string">&#123;refVal&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">id</span>=<span class="string">&#123;id&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123;item.key&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        );</span></span><br><span class="line"><span class="language-xml">      &#125;)&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://s2.loli.net/2022/02/15/GCWIV5wauFB6TJX.gif" alt="IntersectionObserveræ•ˆæœ"></p>
<p>æ¨èç”¨è¿™ç§æ–¹æ³•ï¼ŒIntersectionObserver æ˜¯å¼‚æ­¥ APIï¼Œæ€§èƒ½æ¶ˆè€—å°ï¼Œç¼ºç‚¹æ˜¯æœ‰äº›è½åæµè§ˆå™¨ä¸æ”¯æŒï¼Œå¦‚å…¬å¸éœ€è¦å…¼å®¹è¿™ç±»ç”¨æˆ·ï¼Œéœ€å¼•å…¥ polyfill</p>
<h2 id="æ‡’åŠ è½½"><a href="#æ‡’åŠ è½½" class="headerlink" title="æ‡’åŠ è½½"></a>æ‡’åŠ è½½</h2><p>ä¸å¤šä»‹ç»ï¼Œä¸€å¥è¯è§£é‡Šï¼šæœ€å¼€å§‹ä¸æ¸²æŸ“æ‰€æœ‰æ•°æ®ï¼Œåªå±•ç¤ºè§†å›¾ä¸Šå¯è§çš„æ•°æ®ï¼Œå½“æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨æ—¶ï¼ŒåŠ è½½æ›´å¤šæ•°æ®</p>
<p>å®ç°åŸç†ï¼šé€šè¿‡ç›‘å¬çˆ¶çº§å…ƒç´ çš„ scroll äº‹ä»¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ IntersectionObserver æˆ– getBoundingClientRect ç­‰ API å®ç°</p>
<p>ä½† scroll äº‹ä»¶ä¼šé¢‘ç¹è§¦å‘ï¼Œæ‰€ä»¥éœ€è¦æ‰‹å†™èŠ‚æµï¼›æ»šåŠ¨å…ƒç´ å†…æœ‰å¤§é‡ DOM ï¼Œå®¹æ˜“é€ æˆå¡é¡¿ï¼Œå»ºè®®ä½¿ç”¨ IntersectionObserver </p>
<p>å› ä¸ºä¹‹å‰åœ¨è®² <a href="https://blog.azhubaby.com/2022/01/22/2022-01-22-%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD/">å›¾ç‰‡æ‡’åŠ è½½</a> æ—¶è¯´è¿‡æ€è·¯ï¼Œè¿™é‡Œå°±ä¸è´´ï¼Œæ–‡æœ«ä¼šé™„ä¸Šdemo</p>
<h2 id="æ—¶é—´åˆ†ç‰‡"><a href="#æ—¶é—´åˆ†ç‰‡" class="headerlink" title="æ—¶é—´åˆ†ç‰‡"></a>æ—¶é—´åˆ†ç‰‡</h2><p>å‚è€ƒ <a target="_blank" rel="noopener" href="https://github.com/chenqf/frontEndBlog/issues/15">å¦‚ä½•é«˜æ€§èƒ½çš„æ¸²æŸ“åä¸‡æ¡æ•°æ®(æ—¶é—´åˆ†ç‰‡) </a> æ‰€ä¸¾ä¾‹å­ï¼Œå¯¹äºå¤§é‡æ•°æ®æ¸²æŸ“æ—¶ï¼ŒJS è¿ç®—å¹¶ä¸æ˜¯æ€§èƒ½çš„ç“¶é¢ˆï¼Œæ€§èƒ½çš„ç“¶é¢ˆä¸»è¦åœ¨äºæ¸²æŸ“é˜¶æ®µã€‚ä¹Ÿå°±æ˜¯è¯´ JS æ‰§è¡Œæ˜¯å¾ˆå¿«çš„ï¼Œé¡µé¢å¡é¡¿æ˜¯å› ä¸ºåŒæ—¶æ¸²æŸ“å¤§é‡ DOM æ‰€å¼•èµ·çš„ï¼Œå¯é‡‡ç”¨åˆ†æ‰¹æ¸²æŸ“çš„æ–¹å¼æ¥è§£å†³</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ul = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;container&#x27;</span>);</span><br><span class="line"><span class="comment">// æ’å…¥åä¸‡æ¡æ•°æ®</span></span><br><span class="line"><span class="keyword">let</span> total = <span class="number">100000</span>;</span><br><span class="line"><span class="comment">// ä¸€æ¬¡æ’å…¥ 20 æ¡</span></span><br><span class="line"><span class="keyword">let</span> once = <span class="number">20</span>;</span><br><span class="line"><span class="comment">// æ€»é¡µæ•°</span></span><br><span class="line"><span class="keyword">let</span> page = total / once</span><br><span class="line"><span class="comment">// æ¯æ¡è®°å½•çš„ç´¢å¼•</span></span><br><span class="line"><span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// å¾ªç¯åŠ è½½æ•°æ®</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loop</span>(<span class="params">curTotal, curIndex</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (curTotal &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ¯é¡µå¤šå°‘æ¡</span></span><br><span class="line">    <span class="keyword">let</span> pageCount = <span class="title class_">Math</span>.<span class="title function_">min</span>(curTotal, once);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; pageCount; i++) &#123;</span><br><span class="line">            <span class="keyword">let</span> li = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line">            li.<span class="property">innerText</span> = curIndex + i + <span class="string">&#x27; : &#x27;</span> + ~~(<span class="title class_">Math</span>.<span class="title function_">random</span>() * total)</span><br><span class="line">            ul.<span class="title function_">appendChild</span>(li)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">loop</span>(curTotal - pageCount, curIndex + pageCount)</span><br><span class="line">    &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">loop</span>(total, index);</span><br></pre></td></tr></table></figure>

<p>æˆ‘çš„ç†è§£æ˜¯ï¼Œé€šè¿‡é€’å½’æ¥æ¸²æŸ“DOMï¼Œåˆšå¼€å§‹å¯ä»¥æ˜¯20ä¸ªï¼Œ20ä¸ªæ¸²æŸ“å®Œåå†æ¸²æŸ“å‰©ä¸‹çš„ï¼Œå¾ªç¯å¦‚æ­¤ï¼Œå°†å…¶å…¨éƒ¨æ¸²æŸ“å®Œã€‚åˆå› ä¸ºæµè§ˆå™¨çš„æ¸²æŸ“æœºåˆ¶æ˜¯â€œå®ä»»åŠ¡â€”å¾®ä»»åŠ¡â€”GUIæ¸²æŸ“â€”å®ä»»åŠ¡â€¦â€ã€‚é‚ç¬¬ä¸€ä¸ª loop æ‰§è¡Œåï¼Œå…ˆç­‰é¡µé¢æ¸²æŸ“å®Œï¼Œå†æ‰§è¡Œä¸‹ä¸€è½®çš„ setTimeoutï¼ˆå®ä»»åŠ¡ï¼‰</p>
<p>ä½¿ç”¨ setTimeout æ¥åšåˆ†ç‰‡ä¼šæœ‰é—®é¢˜ï¼Œå°±æ˜¯å½“æˆ‘ä»¬å¿«é€’ä¸‹æ‹‰æ—¶ï¼Œä¼šå‡ºç°é—ªå±æˆ–ç™½å±ç°è±¡ï¼Ÿ</p>
<p>è¿™æ˜¯å› ä¸ºäººçœ¼è¯†åˆ«å¸§æ•°ä¸º24å¸§ã€‚å½“å¸§æ•°ä¸º24å¸§æ—¶ï¼Œè¿ç»­çš„ç”»é¢ä¼šå½¢æˆåŠ¨ç”»ï¼Œè€ä¸€è¾ˆçš„åŠ¨ç”»ç‰‡ï¼Œä¾‹å¦‚ã€Šå¤§é—¹å¤©ç©ºã€‹ã€Šå“ªå’é—¹æµ·ã€‹ä¹‹ç±»éƒ½æ˜¯ä¸€ç§’é‡Œæœ‰24ä¸ªç”»é¢ï¼ˆ24å¸§ï¼‰ï¼Œå¹³æ»‘åŠ¨ç”»çš„æœ€ä½³å¾ªç¯é—´éš”å°±æ˜¯ 1000 / 24ï¼Œçº¦ç­‰äº 41.67ms</p>
<p>è€Œç”µè„‘æ˜¾ç¤ºå™¨çš„åˆ·æ–°é¢‘ç‡ä¸º 60 å¸§ï¼Œå¤§æ¦‚ç›¸å½“äºæ¯ç§’é‡ç»˜ 60 æ¬¡ã€‚åŒç†ï¼Œå¦‚æœæƒ³éª—è¿‡äººçœ¼ï¼Œå¹³æ»‘åŠ¨ç”»çš„æœ€ä½³å¾ªç¯æ—¶é—´å°±æ˜¯ 1000 / 60ï¼Œçº¦ç­‰äº 16.7ms</p>
<p>è€Œ setTimeout çš„æ‰§è¡Œæ—¶é—´å¹¶ä¸æ˜¯ç¡®å®šçš„ï¼Œè™½ç„¶æˆ‘ä»¬å†™äº† setTimeout(() =&gt; {}, 0) ï¼Œä½†è¿™æ˜¯ä¸å‡†ç¡®çš„ï¼ŒæŒ‰ç…§ H5 æ ‡å‡†è§„å®š setTimeout çš„ç¬¬äºŒä¸ªå‚æ•°ä¸èƒ½å°äº 4msï¼Œä¸è¶³ä¼šè‡ªåŠ¨å¢åŠ </p>
<p>æ‰€ä»¥å½“ç¬¬ä¸€ä¸ªå®ä»»åŠ¡å®Œæˆï¼Œç¬¬ä¸€ä¸ªå¾®ä»»åŠ¡å®Œæˆï¼Œç¬¬ä¸€æ¬¡æ¸²æŸ“é¡µé¢åï¼Œ4 æ¯«ç§’åå†æ‰§è¡Œç¬¬äºŒä¸ªå®ä»»åŠ¡ï¼Œè¿™æ ·å°±å¯¼è‡´äº†å®é™…æ‰§è¡Œæ—¶é—´æ…¢äº† 4 æ¯«ç§’ï¼Œå½“ä¸€ä¸ªå‘¨æœŸï¼ˆå®ä»»åŠ¡+å¾®ä»»åŠ¡+GUIæ¸²æŸ“+4msï¼‰çš„æ€»å’Œæ—¶é—´å¤§äº16.7msï¼Œå°±ä¼šå‡ºç°æ‰å¸§ç°è±¡ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ React è¦ä½¿ç”¨ Fiber æ¶æ„çš„åŸå› </p>
<p>åŠ ä¸Šå„ç±»ç”µå­è®¾å¤‡çš„åˆ·æ–°é¢‘ç‡ä¸åŒï¼Œä¹Ÿä¼šå¯¼è‡´ä¸€ä¸ªå‘¨æœŸçš„æ€»æ—¶é—´å¤§äº16.7ms</p>
<p>requestAnimationFrame æ­£æ˜¯è§£å†³è¿™ä¸€é—®é¢˜çš„å…³é”®APIï¼Œå®ƒå‘Šè¯‰æµè§ˆå™¨â€”â€”ä½ å¸Œæœ›æ‰§è¡Œä¸€ä¸ªåŠ¨ç”»ï¼Œå¹¶ä¸”è¦æ±‚æµè§ˆå™¨åœ¨ä¸‹æ¬¡é‡ç»˜ä¹‹å‰è°ƒç”¨æŒ‡å®šçš„å›è°ƒå‡½æ•°æ›´æ–°åŠ¨ç”»ã€‚</p>
<p>å› ä¸ºä»–æ˜¯æµè§ˆå™¨æ‰€æä¾›çš„åŸç”Ÿ APIï¼Œæ‰€ä»¥å„ç±»ç”µå­è®¾å¤‡éƒ½èƒ½ä½¿ç”¨ï¼Œæ ¹æ®ä¸åŒçš„åˆ·æ–°é¢‘ç‡ï¼Œç»™äºä¸åŒçš„åŠ¨ç”»æ‰§è¡Œæ—¶é—´ï¼Œå°±ä¸ä¼šå¼•èµ·ä¸¢å¸§ç°è±¡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">loop</span>(<span class="params">curTotal, curIndex</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (curTotal &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ¯é¡µå¤šå°‘æ¡</span></span><br><span class="line">    <span class="keyword">let</span> pageCount = <span class="title class_">Math</span>.<span class="title function_">min</span>(curTotal, once);</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">requestAnimationFrame</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; pageCount; i++) &#123;</span><br><span class="line">            <span class="keyword">let</span> li = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line">            li.<span class="property">innerText</span> = curIndex + i + <span class="string">&#x27; : &#x27;</span> + ~~(<span class="title class_">Math</span>.<span class="title function_">random</span>() * total)</span><br><span class="line">            ul.<span class="title function_">appendChild</span>(li)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">loop</span>(curTotal - pageCount, curIndex + pageCount)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">loop</span>(total, index);</span><br></pre></td></tr></table></figure>

<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æ¸²æŸ“åä¸‡æ¡æ•°æ®æœ‰ä¸‰ç§è§£å†³æ–¹æ¡ˆï¼Œä¸ºè™šæ‹Ÿåˆ—è¡¨ã€æ‡’åŠ è½½ã€æ—¶é—´åˆ†ç‰‡ã€‚æœ€ä¼˜é€‰æ˜¯è™šæ‹Ÿåˆ—è¡¨ï¼ŒDOM æ ‘ä¸ŠåªæŒ‚è½½æœ‰é™çš„DOMï¼›æ‡’åŠ è½½å’Œæ—¶é—´åˆ†ç‰‡çš„ç¼ºç‚¹åœ¨äºæ’å…¥å¤§é‡çš„DOMï¼Œå å†…å­˜è¿è¡Œæ—¶ä¼šé€ æˆå¡é¡¿</p>
<p>æ— è®ºæ˜¯è™šæ‹Ÿåˆ—è¡¨è¿˜æ˜¯æ‡’åŠ è½½ï¼Œä¼ ç»Ÿçš„åšæ³•æ˜¯ scroll + èŠ‚æµï¼Œè¿™ç§åšæ³•çš„ä¼˜åŠ¿æ˜¯è€ APIï¼Œå…¼å®¹æ€§åˆšåˆšçš„ï¼Œç¼ºç‚¹æ˜¯ï¼Œæ»‘å¤šäº†è¿˜æ˜¯ä¼šå¼•èµ·æ€§èƒ½é—®é¢˜ï¼Œå½“ç„¶ IntersectionObserver ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæ— éæ˜¯æ¢äº†ä¸ª API åšâ€œå…ƒç´ æ˜¯å¦å‡ºç°åœ¨è§†å›¾â€åˆ¤æ–­ï¼Œæœ€å¥½çš„æ–¹æ¡ˆæ˜¯ç”¨ IntersectionObserverï¼ˆäº¤å‰è§‚å¯Ÿå™¨ï¼‰ï¼Œå¼‚æ­¥åŠ è½½ã€æ€§èƒ½æ¶ˆè€—å°</p>
<p>é™„ä¸Šçº¿ä¸Šdemoç¤ºä¾‹ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://demo.azhubaby.com/%E6%B8%B2%E6%9F%93%E5%8D%81%E4%B8%87%E6%9D%A1%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/%E8%99%9A%E6%8B%9F%E5%88%97%E8%A1%A8/scroll/index.html">æ¸²æŸ“åä¸‡æ¡æ•°æ®è§£å†³æ–¹æ¡ˆ-è™šæ‹Ÿåˆ—è¡¨-scroll</a></li>
<li><a target="_blank" rel="noopener" href="https://demo.azhubaby.com/%E6%B8%B2%E6%9F%93%E5%8D%81%E4%B8%87%E6%9D%A1%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/%E6%87%92%E5%8A%A0%E8%BD%BD/IntersectionObserver/index.html">æ¸²æŸ“åä¸‡æ¡æ•°æ®è§£å†³æ–¹æ¡ˆ-è™šæ‹Ÿåˆ—è¡¨-IntersectionObserver</a></li>
<li><a target="_blank" rel="noopener" href="https://demo.azhubaby.com/%E6%B8%B2%E6%9F%93%E5%8D%81%E4%B8%87%E6%9D%A1%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/%E6%87%92%E5%8A%A0%E8%BD%BD/scroll/index.html">æ¸²æŸ“åä¸‡æ¡æ•°æ®è§£å†³æ–¹æ¡ˆ-æ‡’åŠ è½½-scroll</a></li>
<li><a target="_blank" rel="noopener" href="https://demo.azhubaby.com/%E6%B8%B2%E6%9F%93%E5%8D%81%E4%B8%87%E6%9D%A1%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/%E6%87%92%E5%8A%A0%E8%BD%BD/getBoundingClientRect/index.html">æ¸²æŸ“åä¸‡æ¡æ•°æ®è§£å†³æ–¹æ¡ˆ-æ‡’åŠ è½½-getBoundingClientRect</a></li>
<li> <a target="_blank" rel="noopener" href="https://demo.azhubaby.com/%E6%B8%B2%E6%9F%93%E5%8D%81%E4%B8%87%E6%9D%A1%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/%E6%87%92%E5%8A%A0%E8%BD%BD/IntersectionObserver/index.html">æ¸²æŸ“åä¸‡æ¡æ•°æ®è§£å†³æ–¹æ¡ˆ-æ‡’åŠ è½½-IntersectionObserver</a></li>
<li><a target="_blank" rel="noopener" href="https://demo.azhubaby.com/%E6%B8%B2%E6%9F%93%E5%8D%81%E4%B8%87%E6%9D%A1%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/%E6%97%B6%E9%97%B4%E5%88%86%E7%89%87/index.html">æ—¶é—´åˆ†ç‰‡-ä¸€æ¬¡æ€§æ‰€å¤„æ¸²æŸ“é—®é¢˜</a></li>
<li><a target="_blank" rel="noopener" href="https://demo.azhubaby.com/%E6%B8%B2%E6%9F%93%E5%8D%81%E4%B8%87%E6%9D%A1%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/%E6%97%B6%E9%97%B4%E5%88%86%E7%89%87/requestAnimationFrame.html">æ—¶é—´åˆ†ç‰‡-è§£å†³æ–¹æ¡ˆ</a></li>
</ul>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/YBr37yNJD2pSmNZ9QPP-yA">æ‡’åŠ è½½ React é•¿é¡µé¢ - åŠ¨æ€æ¸²æŸ“ç»„ä»¶</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/oAlkEB4G6I5BokZQ02Pvng">å­—èŠ‚è·³åŠ¨é¢è¯•å®˜ï¼šè¯·100è¡Œä»£ç å®ç°æ— é™æ»šåŠ¨</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzU3Nzk3NDk5OQ==&mid=2247483836&idx=1&sn=31adbff9461dc2a1f90cb6b947e53fb4&chksm=fd7d2604ca0aaf12011800b7b08cb13d1e0dca01f9ec46a40edafb0d1c3f9a065ae0e38844cb&mpshare=1&scene=1&srcid=&sharer_sharetime=1572568998733&sharer_shareid=778ad5bf3b27e0078eb105d7277263f6#rd">ã€Œå‰ç«¯è¿›é˜¶ã€é«˜æ€§èƒ½æ¸²æŸ“åä¸‡æ¡æ•°æ®(è™šæ‹Ÿåˆ—è¡¨)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/chenqf/frontEndBlog/issues/15#">å¦‚ä½•é«˜æ€§èƒ½çš„æ¸²æŸ“åä¸‡æ¡æ•°æ®(æ—¶é—´åˆ†ç‰‡)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/chenqf/frontEndBlog/issues/16#">å¦‚ä½•é«˜æ€§èƒ½çš„æ¸²æŸ“åä¸‡æ¡æ•°æ®(è™šæ‹Ÿåˆ—è¡¨)</a></li>
</ul>
</div><div class="tags"><a href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/"><i class="fa fa-tag"></i>é¢è¯•é¢˜</a><a href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"><i class="fa fa-tag"></i>æ€§èƒ½ä¼˜åŒ–</a></div><div class="post-nav"><a class="pre" href="/2022/02/11/2022-02-11-npm%E6%8D%A2%E6%BA%90%E6%9B%B4%E6%96%B0/">ç¬”è®°ï¼šnpmæ¢æºæ›´æ–°</a><a class="next" href="/2022/02/08/2022-02-08-%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9Apromise%E7%9A%84%E9%93%BE%E5%BC%8F%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84/">é¢è¯•é¢˜ï¼špromiseçš„é“¾å¼æ€ä¹ˆå®ç°çš„</a></div><div id="container"></div><link rel="stylesheet" type="text/css" href="//unpkg.com/gitalk/dist/gitalk.css?v=1.0.1"><script type="text/javascript" src="//cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.js?v=1.0.1"></script><script type="text/javascript" src="//unpkg.com/gitalk/dist/gitalk.min.js?v=1.0.1"></script><script>var gitalk = new Gitalk({
  clientID: 'ff0c33d53db26a5b1424',
  clientSecret: 'd42b8e0556a1f4e20667e0a48c1adb9eca12d6ee',
  repo: 'blog',
  owner: 'johanazhu',
  admin: ['johanazhu'],
  id: md5(location.pathname),
  distractionFreeMode: false
})
gitalk.render('container')
</script></div></div></div><div id="secondary"><div class="widget"><div class="widget-title"><h3> æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·</h3></div><div class="wechatwidget"><a href="#"><img src="https://s2.loli.net/2022/03/25/VqfD2ScLuKzjbR8.jpg"/></a><span>å¾®ä¿¡å·ï¼šjohanbo88</span></div></div><div class="widget"><div class="widget-title"><h3>æœ€è¿‘æ–‡ç« </h3></div><ul class="widget-list"><li class="widget-list-item"><a class="widget-list-link" href="/2023/03/07/2023-03-02-%E5%B0%9D%E8%AF%95%E7%94%A8WSL2+Ubuntu%E5%BC%80%E5%8F%91/">å°è¯•ç”¨ WSL2 + Ubuntu å¼€å‘</a></li><li class="widget-list-item"><a class="widget-list-link" href="/2023/02/13/2023-02-13-%E5%AE%89%E8%A3%85%20docker%20%E5%90%8E%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8/">å®‰è£… docker åæ— æ³•å¯åŠ¨</a></li><li class="widget-list-item"><a class="widget-list-link" href="/2023/01/09/2023-01-09-%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1hash%E3%80%81history%E7%9A%84%E5%AE%9E%E7%8E%B0/">å‰ç«¯è·¯ç”±hashã€historyçš„å®ç°</a></li><li class="widget-list-item"><a class="widget-list-link" href="/2022/12/10/2022-12-10-%E6%8F%90%E9%AB%98%E5%BC%80%E5%8F%91%E4%BD%93%E9%AA%8C%EF%BC%9Adev-container/">æ‰‹æŠŠæ‰‹æé«˜å¼€å‘ä½“éªŒï¼šdev-container</a></li><li class="widget-list-item"><a class="widget-list-link" href="/2022/10/09/2022-10-09-%E4%BB%8E%E9%9D%A2%E8%AF%95%E9%A2%98%E5%88%B0%E6%8F%92%E4%BB%B6%E6%9C%BA%E5%88%B6%E7%9A%84%E5%B0%8F%E6%80%9D%E8%80%83/">ä»é¢è¯•é¢˜åˆ°æ’ä»¶æœºåˆ¶çš„å°æ€è€ƒ</a></li></ul></div><div class="widget"><div class="widget-title"><h3> åˆ†ç±»</h3></div><ul class="widget-list"><li class="widget-list-item"><a class="widget-list-link" href="/categories/10X%E7%A8%8B%E5%BA%8F%E5%91%98/">10Xç¨‹åºå‘˜</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/HTTP/">HTTP</a><span class="widget-list-count">2</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">å‰ç«¯å¼€å‘</a><span class="widget-list-count">35</span><ul class="widget-list-child"><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/CSS/">CSS</a><span class="widget-list-count">6</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/JavaScript/">JavaScript</a><span class="widget-list-count">9</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/React/">React</a><span class="widget-list-count">12</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/umi/">umi</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%BC%80%E5%8F%91/">å¼€å‘</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1/">å¾®ä¿¡</a><span class="widget-list-count">3</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">æ€§èƒ½ä¼˜åŒ–</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">ç§»åŠ¨ç«¯</a><span class="widget-list-count">2</span></li></ul></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%AE%9E%E6%88%98/">å®æˆ˜</a><span class="widget-list-count">5</span><ul class="widget-list-child"><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%AE%9E%E6%88%98/%E5%85%AC%E5%8F%B8%E9%A1%B9%E7%9B%AE/">å…¬å¸é¡¹ç›®</a><span class="widget-list-count">3</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%AE%9E%E6%88%98/%E7%8B%AC%E7%AB%8B%E9%A1%B9%E7%9B%AE/">ç‹¬ç«‹é¡¹ç›®</a><span class="widget-list-count">2</span></li></ul></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%BA%93/">åº“</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E5%BC%80%E5%8F%91%E4%BD%93%E9%AA%8C/">å¼€å‘ä½“éªŒ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E6%9C%89%E7%9F%A5%E6%9C%89%E8%A1%8C/">æœ‰çŸ¥æœ‰è¡Œ</a><span class="widget-list-count">8</span><ul class="widget-list-child"><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E6%9C%89%E7%9F%A5%E6%9C%89%E8%A1%8C/%E5%86%99%E4%BD%9C/">å†™ä½œ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E6%9C%89%E7%9F%A5%E6%9C%89%E8%A1%8C/%E5%88%86%E4%BA%AB/">åˆ†äº«</a><span class="widget-list-count">4</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E6%9C%89%E7%9F%A5%E6%9C%89%E8%A1%8C/%E5%AD%A6%E4%B9%A0/">å­¦ä¹ </a><span class="widget-list-count">3</span></li></ul></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91/">æœåŠ¡ç«¯å¼€å‘</a><span class="widget-list-count">9</span><ul class="widget-list-child"><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91/Koa2/">Koa2</a><span class="widget-list-count">3</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91/Node/">Node</a><span class="widget-list-count">2</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%80%E5%8F%91/%E9%83%A8%E7%BD%B2/">éƒ¨ç½²</a><span class="widget-list-count">4</span></li></ul></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E7%90%86%E8%B4%A2/">ç†è´¢</a><span class="widget-list-count">1</span><ul class="widget-list-child"><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E7%90%86%E8%B4%A2/%E5%8A%A0%E5%AF%86%E8%B4%A7%E5%B8%81/">åŠ å¯†è´§å¸</a><span class="widget-list-count">1</span></li></ul></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/">ç–‘éš¾æ‚ç—‡</a><span class="widget-list-count">2</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E7%A2%8E%E7%9A%AE%E6%89%AF%E6%B7%A1/">ç¢çš®æ‰¯æ·¡</a><span class="widget-list-count">2</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">ç¼–ç¨‹è¯­è¨€</a><span class="widget-list-count">8</span><ul class="widget-list-child"><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Git/">Git</a><span class="widget-list-count">3</span></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/JavaScript/">JavaScript</a><span class="widget-list-count">5</span></li></ul></li><li class="widget-list-item"><a class="widget-list-link" href="/categories/%E8%BF%90%E7%BB%B4/">è¿ç»´</a><span class="widget-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><h3> å½’æ¡£</h3></div><ul class="widget-list"><li class="widget-list-item"><a class="widget-list-link" href="/archives/2023/03/">2023å¹´ä¸‰æœˆ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2023/02/">2023å¹´äºŒæœˆ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2023/01/">2023å¹´ä¸€æœˆ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/12/">2022å¹´åäºŒæœˆ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/10/">2022å¹´åæœˆ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/09/">2022å¹´ä¹æœˆ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/08/">2022å¹´å…«æœˆ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/07/">2022å¹´ä¸ƒæœˆ</a><span class="widget-list-count">2</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/05/">2022å¹´äº”æœˆ</a><span class="widget-list-count">2</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/04/">2022å¹´å››æœˆ</a><span class="widget-list-count">4</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/03/">2022å¹´ä¸‰æœˆ</a><span class="widget-list-count">7</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/02/">2022å¹´äºŒæœˆ</a><span class="widget-list-count">8</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2022/01/">2022å¹´ä¸€æœˆ</a><span class="widget-list-count">5</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2021/12/">2021å¹´åäºŒæœˆ</a><span class="widget-list-count">8</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2021/11/">2021å¹´åä¸€æœˆ</a><span class="widget-list-count">8</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2021/10/">2021å¹´åæœˆ</a><span class="widget-list-count">5</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2021/09/">2021å¹´ä¹æœˆ</a><span class="widget-list-count">5</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2021/08/">2021å¹´å…«æœˆ</a><span class="widget-list-count">8</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2021/05/">2021å¹´äº”æœˆ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2021/04/">2021å¹´å››æœˆ</a><span class="widget-list-count">2</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2021/02/">2021å¹´äºŒæœˆ</a><span class="widget-list-count">1</span></li><li class="widget-list-item"><a class="widget-list-link" href="/archives/2020/11/">2020å¹´åä¸€æœˆ</a><span class="widget-list-count">3</span></li></ul></div><div class="widget"><div class="widget-title"><h3>å‹æƒ…é“¾æ¥</h3></div><ul></ul><a href="https://azhubaby.com/" title="ä¸ªäººç½‘ç«™" target="_blank">ä¸ªäººç½‘ç«™</a><ul></ul><a href="https://fe.azhubaby.com/" title="äº”å¹´å‰ç«¯ä¸‰å¹´é¢è¯•" target="_blank">äº”å¹´å‰ç«¯ä¸‰å¹´é¢è¯•</a></div></div></div></div></div><footer id="footer"><div class="container"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>Â© 2023 <span>æœ¬ç«™æ€»è®¿é—®é‡ï¼š<span id="busuanzi_value_site_pv"></span>&nbsp;æ¬¡</span>
<span>æ€»è®¿å®¢ï¼š<span id="busuanzi_value_site_uv"></span>äºº</span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo. &nbsp;</a>Theme by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></footer><link rel="stylesheet" type="text/css" href="/css/search.css?v=1.0.1"><script type="text/javascript" src="/js/search.js?v=1.0.1"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'search-input', 'search-results');
</script><script type="text/javascript" src="/js/copycode.js" successtext="å¤åˆ¶æˆåŠŸ!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.1"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.1"></script><div class="search-page"><div class="search-icon-close-container"><span class="search-icon-close"><i class="fa fa-chevron-down"></i></span></div><div class="search-main container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><form></form><input type="text" id="search-input" placeholder="searching..."><div class="mini-post-list" id="search-results"></div></div></div></div></div></body></html>